import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.DgDu2bHw.js";const F=JSON.parse('{"title":"UtilsApi","description":"","frontmatter":{},"headers":[],"relativePath":"NuxtDocs/CoreEssentials/NuxtApi/UtilsApi.md","filePath":"NuxtDocs/CoreEssentials/NuxtApi/UtilsApi.md"}'),l={name:"NuxtDocs/CoreEssentials/NuxtApi/UtilsApi.md"};function t(h,s,p,r,k,d){return n(),a("div",null,s[0]||(s[0]=[e('<h1 id="utilsapi" tabindex="-1">UtilsApi <a class="header-anchor" href="#utilsapi" aria-label="Permalink to &quot;UtilsApi&quot;">​</a></h1><h2 id="一、数据获取与状态管理" tabindex="-1">一、数据获取与状态管理 <a class="header-anchor" href="#一、数据获取与状态管理" aria-label="Permalink to &quot;一、数据获取与状态管理&quot;">​</a></h2><h3 id="fetch" tabindex="-1"><code>$fetch</code> <a class="header-anchor" href="#fetch" aria-label="Permalink to &quot;`$fetch`&quot;">​</a></h3><ul><li><strong>作用</strong>：发起 HTTP 请求（类似 axios）</li><li><strong>特点</strong>：自动处理错误，支持服务端/客户端</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> data</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> $fetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：服务端使用时不包含浏览器 cookie</li></ul><hr><h3 id="useasyncdata-uselazyasyncdata" tabindex="-1"><code>useAsyncData</code> &amp; <code>useLazyAsyncData</code> <a class="header-anchor" href="#useasyncdata-uselazyasyncdata" aria-label="Permalink to &quot;`useAsyncData` &amp; `useLazyAsyncData`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：获取异步数据（支持 SSR）</p></li><li><p><strong>区别</strong>：</p><ul><li><code>useAsyncData</code>：立即加载</li><li><code>useLazyAsyncData</code>：延迟加载</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> data</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useAsyncData</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> ()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> $fetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：key 值必须唯一</li></ul><hr><h3 id="usefetch-uselazyfetch" tabindex="-1"><code>useFetch</code> &amp; <code>useLazyFetch</code> <a class="header-anchor" href="#usefetch-uselazyfetch" aria-label="Permalink to &quot;`useFetch` &amp; `useLazyFetch`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：简化 API 请求</p></li><li><p><strong>区别</strong>：</p><ul><li><code>useFetch</code>：自动发起请求</li><li><code>useLazyFetch</code>：手动触发请求</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> data</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useFetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：自动处理加载状态和错误</li></ul><hr><h3 id="usestate" tabindex="-1"><code>useState</code> <a class="header-anchor" href="#usestate" aria-label="Permalink to &quot;`useState`&quot;">​</a></h3><ul><li><strong>作用</strong>：创建响应式共享状态</li><li><strong>特点</strong>：自动跨组件同步</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> counter</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useState</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">counter</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> ()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 0</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">counter</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">value</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">++</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：key 值必须唯一</li></ul><hr><h3 id="refreshnuxtdata" tabindex="-1"><code>refreshNuxtData</code> <a class="header-anchor" href="#refreshnuxtdata" aria-label="Permalink to &quot;`refreshNuxtData`&quot;">​</a></h3><ul><li><strong>作用</strong>：重新获取指定数据</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">refreshNuxtData</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 刷新 products 数据</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：需配合 useAsyncData 使用</li></ul><h3 id="clearnuxtdata" tabindex="-1"><code>clearNuxtData</code> <a class="header-anchor" href="#clearnuxtdata" aria-label="Permalink to &quot;`clearNuxtData`&quot;">​</a></h3><ul><li><strong>作用</strong>：清除缓存数据</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clearNuxtData</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">products</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 清除 products 缓存</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：不会重新获取数据</li></ul><hr><h3 id="clearnuxtstate" tabindex="-1"><code>clearNuxtState</code> <a class="header-anchor" href="#clearnuxtstate" aria-label="Permalink to &quot;`clearNuxtState`&quot;">​</a></h3><ul><li><strong>作用</strong>：清除共享状态</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clearNuxtState</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">counter</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 清除 counter 状态</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：状态会被重置为初始值</li></ul><h2 id="二、路由与导航控制" tabindex="-1">二、路由与导航控制 <a class="header-anchor" href="#二、路由与导航控制" aria-label="Permalink to &quot;二、路由与导航控制&quot;">​</a></h2><h3 id="navigateto" tabindex="-1"><code>navigateTo</code> <a class="header-anchor" href="#navigateto" aria-label="Permalink to &quot;`navigateTo`&quot;">​</a></h3><ul><li><strong>作用</strong>：编程式路由导航</li><li><strong>特点</strong>：支持路径或路由对象</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">navigateTo</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/dashboard</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">navigateTo</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/profile</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> query</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> id</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：服务端调用无效</li></ul><hr><h3 id="abortnavigation" tabindex="-1"><code>abortNavigation</code> <a class="header-anchor" href="#abortnavigation" aria-label="Permalink to &quot;`abortNavigation`&quot;">​</a></h3><ul><li><strong>作用</strong>：中止路由导航</li><li><strong>使用场景</strong>：路由守卫中阻止导航</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">defineNuxtRouteMiddleware</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">to</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">isLoggedIn</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> abortNavigation</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：只能在路由中间件中使用</li></ul><hr><h3 id="addroutemiddleware" tabindex="-1"><code>addRouteMiddleware</code> <a class="header-anchor" href="#addroutemiddleware" aria-label="Permalink to &quot;`addRouteMiddleware`&quot;">​</a></h3><ul><li><strong>作用</strong>：动态添加路由中间件</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">addRouteMiddleware</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">auth</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> ()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">isLoggedIn</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> navigateTo</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/login</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：可以全局或局部添加</li></ul><hr><h3 id="onbeforerouteleave-onbeforerouteupdate" tabindex="-1"><code>onBeforeRouteLeave</code> &amp; <code>onBeforeRouteUpdate</code> <a class="header-anchor" href="#onbeforerouteleave-onbeforerouteupdate" aria-label="Permalink to &quot;`onBeforeRouteLeave` &amp; `onBeforeRouteUpdate`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：路由守卫钩子</p></li><li><p><strong>区别</strong>：</p><ul><li><code>Leave</code>：离开当前路由时</li><li><code>Update</code>：路由更新时（相同组件）</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">onBeforeRouteLeave</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> confirm</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">确定离开吗？</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：返回 false 可阻止导航</li></ul><hr><h3 id="setpagelayout" tabindex="-1"><code>setPageLayout</code> <a class="header-anchor" href="#setpagelayout" aria-label="Permalink to &quot;`setPageLayout`&quot;">​</a></h3><ul><li><strong>作用</strong>：动态更改页面布局</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">setPageLayout</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">admin</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 使用 layouts/admin.vue</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：只能在页面组件中使用</li></ul><h2 id="三、错误处理" tabindex="-1">三、错误处理 <a class="header-anchor" href="#三、错误处理" aria-label="Permalink to &quot;三、错误处理&quot;">​</a></h2><h3 id="createerror" tabindex="-1"><code>createError</code> <a class="header-anchor" href="#createerror" aria-label="Permalink to &quot;`createError`&quot;">​</a></h3><ul><li><strong>作用</strong>：创建错误对象</li><li><strong>特点</strong>：可指定状态码和消息</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">throw</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> createError</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> statusCode</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 404</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> message</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">页面未找到</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：自动触发错误页面</li></ul><hr><h3 id="showerror" tabindex="-1"><code>showError</code> <a class="header-anchor" href="#showerror" aria-label="Permalink to &quot;`showError`&quot;">​</a></h3><ul><li><strong>作用</strong>：显示错误页面</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">showError</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">数据加载失败</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：会中断当前执行流程</li></ul><hr><h3 id="clearerror" tabindex="-1"><code>clearError</code> <a class="header-anchor" href="#clearerror" aria-label="Permalink to &quot;`clearError`&quot;">​</a></h3><ul><li><strong>作用</strong>：清除错误状态</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">clearError</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">() </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 返回上一页或首页</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：通常在错误页面使用</li></ul><hr><h3 id="useerror" tabindex="-1"><code>useError</code> <a class="header-anchor" href="#useerror" aria-label="Permalink to &quot;`useError`&quot;">​</a></h3><ul><li><strong>作用</strong>：获取当前错误对象</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> error</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useError</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">error</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">value</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">showAlert</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">error</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">value</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">message</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：需在错误页面使用</li></ul><h3 id="四、seo-与头部管理" tabindex="-1">四、SEO 与头部管理 <a class="header-anchor" href="#四、seo-与头部管理" aria-label="Permalink to &quot;四、SEO 与头部管理&quot;">​</a></h3><h3 id="usehead-useheadsafe" tabindex="-1"><code>useHead</code> &amp; <code>useHeadSafe</code> <a class="header-anchor" href="#usehead-useheadsafe" aria-label="Permalink to &quot;`useHead` &amp; `useHeadSafe`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：管理页面头部标签</p></li><li><p><strong>区别</strong>：</p><ul><li><code>useHead</code>：直接设置</li><li><code>useHeadSafe</code>：自动转义特殊字符</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">useHead</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  title</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">产品页面</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">description</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> content</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">产品详情</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>注意</strong>：避免重复设置相同标签</li></ul><hr><h3 id="useseometa-useserverseometa" tabindex="-1"><code>useSeoMeta</code> &amp; <code>useServerSeoMeta</code> <a class="header-anchor" href="#useseometa-useserverseometa" aria-label="Permalink to &quot;`useSeoMeta` &amp; `useServerSeoMeta`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：简化 SEO 设置</p></li><li><p><strong>区别</strong>：</p><ul><li><code>useSeoMeta</code>：客户端和服务端</li><li><code>useServerSeoMeta</code>：仅服务端</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">useSeoMeta</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  title</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">首页</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  ogTitle</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">欢迎访问</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>注意</strong>：自动处理常用 SEO 标签</li></ul><h2 id="五、组件与渲染" tabindex="-1">五、组件与渲染 <a class="header-anchor" href="#五、组件与渲染" aria-label="Permalink to &quot;五、组件与渲染&quot;">​</a></h2><h3 id="definenuxtcomponent" tabindex="-1"><code>defineNuxtComponent</code> <a class="header-anchor" href="#definenuxtcomponent" aria-label="Permalink to &quot;`defineNuxtComponent`&quot;">​</a></h3><ul><li><strong>作用</strong>：定义 Nuxt 组件</li><li><strong>特点</strong>：支持自动导入等功能</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtComponent</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  setup</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 组件逻辑</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>注意</strong>：与 Vue 组件基本一致</li></ul><hr><h3 id="definelazyhydrationcomponent" tabindex="-1"><code>defineLazyHydrationComponent</code> <a class="header-anchor" href="#definelazyhydrationcomponent" aria-label="Permalink to &quot;`defineLazyHydrationComponent`&quot;">​</a></h3><ul><li><strong>作用</strong>：创建延迟水合组件</li><li><strong>使用场景</strong>：优化首屏性能</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineLazyHydrationComponent</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">HeavyComponent.vue</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：适用于非关键组件</li></ul><hr><h3 id="prefetchcomponents-preloadcomponents" tabindex="-1"><code>prefetchComponents</code> &amp; <code>preloadComponents</code> <a class="header-anchor" href="#prefetchcomponents-preloadcomponents" aria-label="Permalink to &quot;`prefetchComponents` &amp; `preloadComponents`&quot;">​</a></h3><ul><li><p><strong>作用</strong>：预加载组件资源</p></li><li><p><strong>区别</strong>：</p><ul><li><code>prefetch</code>：低优先级预取</li><li><code>preload</code>：高优先级预加载</li></ul></li><li><p><strong>示例</strong>：</p></li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">preloadComponents</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">([</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">ProductCard</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 提前加载组件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：优化用户下一步操作体验</li></ul><hr><h3 id="preloadroutecomponents" tabindex="-1"><code>preloadRouteComponents</code> <a class="header-anchor" href="#preloadroutecomponents" aria-label="Permalink to &quot;`preloadRouteComponents`&quot;">​</a></h3><ul><li><strong>作用</strong>：预加载路由所需组件</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">preloadRouteComponents</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/dashboard</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 预加载仪表盘路由</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：提升导航速度</li></ul><h2 id="六、服务端与运行时" tabindex="-1">六、服务端与运行时 <a class="header-anchor" href="#六、服务端与运行时" aria-label="Permalink to &quot;六、服务端与运行时&quot;">​</a></h2><h3 id="useruntimeconfig" tabindex="-1"><code>useRuntimeConfig</code> <a class="header-anchor" href="#useruntimeconfig" aria-label="Permalink to &quot;`useRuntimeConfig`&quot;">​</a></h3><ul><li><strong>作用</strong>：访问运行时配置</li><li><strong>特点</strong>：区分公开/私有配置</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> config</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRuntimeConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> apiKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> config</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">public</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">apiKey</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：私有配置仅服务端可用</li></ul><hr><h3 id="useappconfig" tabindex="-1"><code>useAppConfig</code> <a class="header-anchor" href="#useappconfig" aria-label="Permalink to &quot;`useAppConfig`&quot;">​</a></h3><ul><li><strong>作用</strong>：访问应用配置</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> appConfig</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useAppConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> theme</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> appConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">theme</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：用于项目级配置</li></ul><hr><h3 id="userequestevent-服务端" tabindex="-1"><code>useRequestEvent</code> (服务端) <a class="header-anchor" href="#userequestevent-服务端" aria-label="Permalink to &quot;`useRequestEvent` (服务端)&quot;">​</a></h3><ul><li><strong>作用</strong>：访问 HTTP 请求事件对象</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> event</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRequestEvent</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> ip</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> event</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">node</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">req</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">socket</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">remoteAddress</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：仅服务端可用</li></ul><hr><h3 id="userequestfetch" tabindex="-1"><code>useRequestFetch</code> <a class="header-anchor" href="#userequestfetch" aria-label="Permalink to &quot;`useRequestFetch`&quot;">​</a></h3><ul><li><strong>作用</strong>：服务端安全 fetch 方法</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> fetch</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRequestFetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> data</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> fetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/data</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：自动处理凭证和头信息</li></ul><hr><h3 id="userequestheaders" tabindex="-1"><code>useRequestHeaders</code> <a class="header-anchor" href="#userequestheaders" aria-label="Permalink to &quot;`useRequestHeaders`&quot;">​</a></h3><ul><li><strong>作用</strong>：获取请求头信息</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> headers</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRequestHeaders</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">([</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">cookie</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：仅服务端可用</li></ul><hr><h3 id="userequesturl" tabindex="-1"><code>useRequestURL</code> <a class="header-anchor" href="#userequesturl" aria-label="Permalink to &quot;`useRequestURL`&quot;">​</a></h3><ul><li><strong>作用</strong>：获取请求 URL</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> url</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRequestURL</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">log</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">url</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">hostname</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：服务端和客户端均可使用</li></ul><hr><h3 id="setresponsestatus" tabindex="-1"><code>setResponseStatus</code> <a class="header-anchor" href="#setresponsestatus" aria-label="Permalink to &quot;`setResponseStatus`&quot;">​</a></h3><ul><li><strong>作用</strong>：设置 HTTP 响应状态码</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">setResponseStatus</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">**</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;">0</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">-</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> **</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 设置**0- **状态</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：仅服务端可用</li></ul><hr><h3 id="useresponseheader" tabindex="-1"><code>useResponseHeader</code> <a class="header-anchor" href="#useresponseheader" aria-label="Permalink to &quot;`useResponseHeader`&quot;">​</a></h3><ul><li><strong>作用</strong>：设置响应头</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">setResponseHeader</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">Cache-Control</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">public, max-age=```600</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：仅服务端可用</li></ul><hr><h3 id="refreshcookie" tabindex="-1"><code>refreshCookie</code> <a class="header-anchor" href="#refreshcookie" aria-label="Permalink to &quot;`refreshCookie`&quot;">​</a></h3><ul><li><strong>作用</strong>：刷新请求中的 cookie</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">refreshCookie</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">event</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 更新cookie状态</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：主要用于服务端中间件</li></ul><h2 id="七、应用生命周期" tabindex="-1">七、应用生命周期 <a class="header-anchor" href="#七、应用生命周期" aria-label="Permalink to &quot;七、应用生命周期&quot;">​</a></h2><h3 id="onnuxtready" tabindex="-1"><code>onNuxtReady</code> <a class="header-anchor" href="#onnuxtready" aria-label="Permalink to &quot;`onNuxtReady`&quot;">​</a></h3><ul><li><strong>作用</strong>：Nuxt 应用加载完成时触发</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">onNuxtReady</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">  console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">log</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">应用已准备就绪</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：只在客户端执行</li></ul><hr><h3 id="reloadnuxtapp" tabindex="-1"><code>reloadNuxtApp</code> <a class="header-anchor" href="#reloadnuxtapp" aria-label="Permalink to &quot;`reloadNuxtApp`&quot;">​</a></h3><ul><li><strong>作用</strong>：重新加载整个应用</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">reloadNuxtApp</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">() </span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 类似页面刷新</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：会重置应用状态</li></ul><hr><h3 id="callonce" tabindex="-1"><code>callOnce</code> <a class="header-anchor" href="#callonce" aria-label="Permalink to &quot;`callOnce`&quot;">​</a></h3><ul><li><strong>作用</strong>：确保函数只执行一次</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> init</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> callOnce</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">  console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">log</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">只执行一次</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">init</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>注意</strong>：全局作用域有效</li></ul><h2 id="八、高级功能" tabindex="-1">八、高级功能 <a class="header-anchor" href="#八、高级功能" aria-label="Permalink to &quot;八、高级功能&quot;">​</a></h2><h3 id="definerouterules" tabindex="-1"><code>defineRouteRules</code> <a class="header-anchor" href="#definerouterules" aria-label="Permalink to &quot;`defineRouteRules`&quot;">​</a></h3><ul><li><strong>作用</strong>：定义路由规则</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">defineRouteRules</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>\n<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">  &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/admin/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> ssr</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"> // 关闭SSR</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：通常在配置文件中使用</li></ul><hr><h3 id="prerenderroutes" tabindex="-1"><code>prerenderRoutes</code> <a class="header-anchor" href="#prerenderroutes" aria-label="Permalink to &quot;`prerenderRoutes`&quot;">​</a></h3><ul><li><strong>作用</strong>：预渲染路由</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">prerenderRoutes</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">([</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/about</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/contact</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">])</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><strong>注意</strong>：适用于静态站点生成</li></ul><hr><h3 id="usepreviewmode" tabindex="-1"><code>usePreviewMode</code> <a class="header-anchor" href="#usepreviewmode" aria-label="Permalink to &quot;`usePreviewMode`&quot;">​</a></h3><ul><li><strong>作用</strong>：管理预览模式</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> enabled</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> usePreviewMode</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">enabled</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">showDraftContent</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><strong>注意</strong>：需要 CMS 集成</li></ul><hr><h3 id="definenuxtplugin" tabindex="-1"><code>defineNuxtPlugin</code> <a class="header-anchor" href="#definenuxtplugin" aria-label="Permalink to &quot;`defineNuxtPlugin`&quot;">​</a></h3><ul><li><strong>作用</strong>：定义 Nuxt 插件</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">defineNuxtPlugin</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">nuxtApp</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">  nuxtApp</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">provide</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">hello</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">name</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> `</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">Hello </span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">${</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">!</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">`</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：插件文件放在 <code>plugins</code> 目录</li></ul><hr><h3 id="definenuxtroutemiddleware" tabindex="-1"><code>defineNuxtRouteMiddleware</code> <a class="header-anchor" href="#definenuxtroutemiddleware" aria-label="Permalink to &quot;`defineNuxtRouteMiddleware`&quot;">​</a></h3><ul><li><strong>作用</strong>：定义路由中间件</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">defineNuxtRouteMiddleware</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">to</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>\n<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">isAuth</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">to</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">return</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/login</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>注意</strong>：中间件文件放在 <code>middleware</code> 目录</li></ul><hr><h3 id="definepagemeta" tabindex="-1"><code>definePageMeta</code> <a class="header-anchor" href="#definepagemeta" aria-label="Permalink to &quot;`definePageMeta`&quot;">​</a></h3><ul><li><strong>作用</strong>：定义页面元信息</li><li><strong>示例</strong>：</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">definePageMeta</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  layout</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">dashboard</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  middleware</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">auth</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><strong>注意</strong>：只能在页面组件使用</li></ul><h2 id="使用注意事项总结" tabindex="-1">使用注意事项总结 <a class="header-anchor" href="#使用注意事项总结" aria-label="Permalink to &quot;使用注意事项总结&quot;">​</a></h2><p>1.<strong>环境区分</strong>：</p><ul><li>服务端专用：<code>useRequestEvent</code>, <code>setResponseStatus</code></li><li>客户端专用：<code>onNuxtReady, </code>useRouter`</li></ul><hr><p>2.<strong>唯一性要求</strong>：</p><ul><li><code>useState</code>, <code>useAsyncData</code> 需要唯一 key</li><li>避免命名冲突</li></ul><hr><p>3.<strong>性能优化</strong>：</p><ul><li>非关键组件用 <code>defineLazyHydrationComponent</code></li><li>预加载资源用 <code>preloadRouteComponents</code></li></ul><hr><p>4.<strong>错误处理</strong>：</p><ul><li>主动错误用 <code>createError</code></li><li>全局捕获用 <code>showError</code></li></ul><hr><p>5.<strong>SEO 最佳实践</strong>：</p><ul><li>关键页面用 <code>useServerSeoMeta</code></li><li>动态内容用 <code>useSeoMeta</code></li></ul><hr><p>6.<strong>路由控制</strong>：</p><ul><li>导航用 <code>navigateTo</code></li><li>阻止导航用 <code>abortNavigation</code></li></ul><hr><p>7.<strong>数据管理</strong>：</p><ul><li>刷新数据用 <code>refreshNuxtData</code></li><li>清除状态用 <code>clearNuxtState</code></li></ul>',221)]))}const g=i(l,[["render",t]]);export{F as __pageData,g as default};
