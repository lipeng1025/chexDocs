import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.DgDu2bHw.js";const E=JSON.parse('{"title":"部署适配","description":"","frontmatter":{},"headers":[],"relativePath":"NuxtDocs/Overview/DeploymentAdaptation.md","filePath":"NuxtDocs/Overview/DeploymentAdaptation.md"}'),p={name:"NuxtDocs/Overview/DeploymentAdaptation.md"};function h(e,s,t,k,r,F){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="部署适配" tabindex="-1">部署适配 <a class="header-anchor" href="#部署适配" aria-label="Permalink to &quot;部署适配&quot;">​</a></h1><h2 id="一、部署模式概述" tabindex="-1">一、部署模式概述 <a class="header-anchor" href="#一、部署模式概述" aria-label="Permalink to &quot;一、部署模式概述&quot;">​</a></h2><p>Nuxt3 支持的部署模式：</p><table tabindex="0"><thead><tr><th><strong>部署模式</strong></th><th><strong>适用场景</strong></th><th><strong>特点</strong></th><th><strong>命令</strong></th></tr></thead><tbody><tr><td>Node.js 服务器</td><td>全动态内容应用</td><td>完整SSR支持，实时渲染</td><td><code>nuxi build</code> + <code>node .output/server/index.mjs</code></td></tr><tr><td>静态站点 (SSG)</td><td>内容为主网站</td><td>预渲染HTML，CDN分发</td><td><code>nuxi generate</code></td></tr><tr><td>Serverless 函数</td><td>弹性扩展应用</td><td>按需执行，自动扩缩容</td><td><code>nuxi build</code> + 平台部署</td></tr><tr><td>边缘计算</td><td>全球用户应用</td><td>低延迟，就近处理</td><td><code>nuxi build</code> + 边缘平台部署</td></tr><tr><td>混合渲染</td><td>复杂业务场景</td><td>动静结合，智能路由</td><td>配置 <code>routeRules</code></td></tr></tbody></table><h2 id="二、node-js-服务器部署" tabindex="-1">二、Node.js 服务器部署 <a class="header-anchor" href="#二、node-js-服务器部署" aria-label="Permalink to &quot;二、Node.js 服务器部署&quot;">​</a></h2><p>1.<strong>标准部署流程</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 构建应用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxi</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 启动生产服务器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">node</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/server/index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2.<strong>PM2 进程管理</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 安装 PM2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npm</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> install</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> -g</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 启动应用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> start</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/server/index.mjs</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --name</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">nuxt-app</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 保存配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> save</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 设置开机启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> startup</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>3.<strong>Nginx 反向代理配置</strong></p><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># /etc/nginx/conf.d/nuxt-app.conf</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">server</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    listen </span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;">80</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    server_name </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">yourdomain.com</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    location</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> / {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_pass </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">http://localhost:3000</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"> # Nuxt 默认端口</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_http_version </span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;">1.1</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_set_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Upgrade </span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">$</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">http_upgrade</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_set_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Connection </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&#39;upgrade&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_set_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Host </span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">$</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">host</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_cache_bypass </span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">$</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">http_upgrade</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_set_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">X-Real-IP </span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">$</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">remote_addr</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        proxy_set_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">X-Forwarded-For </span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">$</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">proxy_add_x_forwarded_for</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    # 静态资源直接服务</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    location</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> /_nuxt/ {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        alias </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">/path/to/app/.output/public/_nuxt/</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        expires </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">1y</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">        add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Cache-Control </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;public, immutable&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>4.<strong>性能优化配置</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  nitro</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    compressPublicAssets</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    minify</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    prerender</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      crawlLinks</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      routes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/sitemap.xml</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  routeRules</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> cache</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> maxAge</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 60</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> *</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 60</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"> // 缓存API响应</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="三、静态站点部署-ssg" tabindex="-1">三、静态站点部署 (SSG) <a class="header-anchor" href="#三、静态站点部署-ssg" aria-label="Permalink to &quot;三、静态站点部署 (SSG)&quot;">​</a></h2><p>1.<strong>基础生成命令</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 生成静态站点</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxi</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> generate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 输出目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">.output/public</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2.<strong>增量静态生成 (ISR)</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  routeRules</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 每60秒重新验证</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/products/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> swr</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 60</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 每天凌晨重新生成</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/blog/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> static</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> prerender</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 动态页面</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/dashboard</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> ssr</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>3.<strong>部署到常见平台</strong></p><p>GitHub Pages:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 设置 baseURL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">//</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> default</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  app:</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">    baseURL:</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> process.env.NODE_ENV</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> ===</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">production</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> ?</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/repo-name/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> :</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 部署脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxi</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> generate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">git</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> add</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/public</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">git</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> commit</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> -m</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">Static deployment</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">git</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> subtree</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> push</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --prefix</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/public</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> origin</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> gh-pages</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Netlify:</p><div class="language-netlify.toml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">netlify.toml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span>[build]</span></span>
<span class="line"><span>  command = &quot;npm run generate&quot;</span></span>
<span class="line"><span>  publish = &quot;.output/public&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[context.production.environment]</span></span>
<span class="line"><span>  NUXT_APP_BASE_URL = &quot;/&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Vercel:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// vercel.json</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">builds</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">src</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">nuxt.config.ts</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">use</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">@nuxtjs/vercel-builder</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">config</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">        &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">generateStaticRoutes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  ]</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">routes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    {</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">src</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/_nuxt/.+</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">headers</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">Cache-Control</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">max-age=31536000</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="四、serverless-部署" tabindex="-1">四、Serverless 部署 <a class="header-anchor" href="#四、serverless-部署" aria-label="Permalink to &quot;四、Serverless 部署&quot;">​</a></h2><p>1.<strong>AWS Lambda 部署</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 安装适配器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npm</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> install</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> @nuxtjs/aws-lambda</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 配置 nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> default</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  nitro:</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">    preset:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">aws-lambda</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxi</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 部署</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">aws</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> lambda</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> update-function-code</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --function-name</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> my-function</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --zip-file</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> fileb://.output/server.zip</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>2.<strong>Vercel Serverless</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// vercel.json</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">version</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">: </span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;">2</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">builds</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">src</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">nuxt.config.ts</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">use</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">@nuxtjs/vercel-builder</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">config</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">        &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">serverFiles</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">server/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>3.<strong>Netlify Functions</strong></p><div class="language-toml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># netlify.toml</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">build</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  command</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">npm run build</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  functions</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">netlify/functions</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  publish</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">.output/public</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">functions</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  node_bundler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">esbuild</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="五、边缘计算部署" tabindex="-1">五、边缘计算部署 <a class="header-anchor" href="#五、边缘计算部署" aria-label="Permalink to &quot;五、边缘计算部署&quot;">​</a></h2><p>1.<strong>Cloudflare Workers</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  nitro</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    preset</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">cloudflare</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 入口文件</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> fetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">request</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#8FBCBB;"> Request</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> env</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#8FBCBB;"> Env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    return</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> getAssetFromKV</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">request</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>2.<strong>Vercel Edge</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// app.vue</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  routeRules</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> edge</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api/**</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> edge</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 中间件</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineEventHandler</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">event</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">  event</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">context</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">edge</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>3.<strong>Netlify Edge Functions</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// netlify/edge-functions/hello.js</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> async</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> (</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">request</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> context</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  return</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> Response</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">Hello from the edge!</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    headers</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">content-type</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">text/html</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// netlify.toml</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">[[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">edge_functions</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/hello</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  function</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> = &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">hello</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="六、docker-容器化部署" tabindex="-1">六、Docker 容器化部署 <a class="header-anchor" href="#六、docker-容器化部署" aria-label="Permalink to &quot;六、Docker 容器化部署&quot;">​</a></h2><p>1.<strong>基础 Dockerfile</strong></p><div class="language-Dockerfile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Dockerfile</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 使用官方 Node 镜像</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">FROM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> node:18-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 设置工作目录</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">WORKDIR</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 复制依赖定义</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">COPY</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> package*.json ./</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">RUN</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 复制项目文件</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">COPY</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> . .</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 构建应用</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">RUN</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 暴露端口</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">EXPOSE</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 启动命令</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">CMD</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;node&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;.output/server/index.mjs&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>2.<strong>多阶段构建优化</strong></p><div class="language-Dockerfile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Dockerfile</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 构建阶段</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">FROM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> node:18-alpine </span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">as</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> builder</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">WORKDIR</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">COPY</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> . .</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">RUN</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> npm ci</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">RUN</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 生产镜像</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">FROM</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> node:18-alpine</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">WORKDIR</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> /app</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">COPY</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> --from=builder /app/.output ./</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">COPY</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> --from=builder /app/node_modules ./node_modules</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">EXPOSE</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">CMD</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;node&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;server/index.mjs&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>3.<strong>Docker Compose 配置</strong></p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">version</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">3.8</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">services</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  app</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    build</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> .</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    ports</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">3000:3000</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    environment</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> NUXT_APP_BASE_URL=/</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> DATABASE_URL=postgres://user:pass@db:5432/mydb</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    depends_on</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> db</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">      </span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  db</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    image</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> postgres:14</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    environment</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">      POSTGRES_USER</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> user</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">      POSTGRES_PASSWORD</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> pass</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">      POSTGRES_DB</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> mydb</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    volumes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> pgdata:/var/lib/postgresql/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">volumes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  pgdata</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="七、环境变量与配置管理" tabindex="-1">七、环境变量与配置管理 <a class="header-anchor" href="#七、环境变量与配置管理" aria-label="Permalink to &quot;七、环境变量与配置管理&quot;">​</a></h2><p>1.<strong>环境变量优先级</strong></p><ul><li><code>.env</code> 文件</li><li>运行时配置 (Runtime Config)</li><li>环境变量 (process.env)</li><li>应用配置 (App Config)</li></ul><p>2.<strong>安全配置实践</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  runtimeConfig</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 仅服务端可用</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    apiSecret</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">API_SECRET</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">    </span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">    // 客户端和服务端都可用</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    public</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      apiBase</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">API_BASE</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> ||</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/api</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>3.<strong>多环境管理</strong></p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span>.env</span></span>
<span class="line"><span>.env.development</span></span>
<span class="line"><span>.env.staging</span></span>
<span class="line"><span>.env.production</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 指定环境</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">NODE_ENV</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">staging</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxi</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="八、部署优化策略" tabindex="-1">八、部署优化策略 <a class="header-anchor" href="#八、部署优化策略" aria-label="Permalink to &quot;八、部署优化策略&quot;">​</a></h2><p>1.<strong>性能优化</strong></p><table tabindex="0"><thead><tr><th><strong>优化点</strong></th><th><strong>实现方式</strong></th><th><strong>效果</strong></th></tr></thead><tbody><tr><td>资源压缩</td><td><code>nitro.compressPublicAssets: true</code></td><td>减少传输体积30-70%</td></tr><tr><td>CDN分发</td><td>配置CDN缓存静态资源</td><td>全球加速，减少延迟</td></tr><tr><td>缓存策略</td><td><code>Cache-Control: public, max-age=31536000</code></td><td>减少重复请求</td></tr><tr><td>HTTP/2推送</td><td>配置服务器推送关键资源</td><td>加速页面渲染</td></tr></tbody></table><p>2.<strong>安全加固</strong></p><div class="language-nginx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># Nginx 安全配置</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">X-Frame-Options </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;SAMEORIGIN&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">X-XSS-Protection </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;1; mode=block&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">X-Content-Type-Options </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;nosniff&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Content-Security-Policy </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;default-src &#39;self&#39; https:&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">add_header </span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">Strict-Transport-Security </span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">&quot;max-age=31536000; includeSubDomains&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> always</span><span style="--shiki-light:#24292EFF;--shiki-dark:#81A1C1;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>3.<strong>监控与日志</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 集成Sentry监控</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  modules</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">@nuxtjs/sentry</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  sentry</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    dsn</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">SENTRY_DSN</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    config</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      environment</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">NODE_ENV</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="九、平台特定适配" tabindex="-1">九、平台特定适配 <a class="header-anchor" href="#九、平台特定适配" aria-label="Permalink to &quot;九、平台特定适配&quot;">​</a></h2><p>1.<strong>Vercel 适配</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// vercel.json</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">build</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">: </span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">    &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">env</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">      &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">NODE_ENV</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">production</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">  &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">routes</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    {</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">src</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/sw.js</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">dest</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/_nuxt/dist/client/sw.js</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    {</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">src</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/(.*)</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">dest</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>2.<strong>Netlify 适配</strong></p><div class="language-toml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># netlify.toml</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">build</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  command</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">npm run build</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  publish</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">.output/public</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">context.production</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  environment</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> NUXT_APP_BASE_URL</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">[[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">redirects</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  from</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/*</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  to</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/index.html</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  status</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 200</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>3.<strong>AWS Amplify 适配</strong></p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># amplify.yml</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">version</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">frontend</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  phases</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    preBuild</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">      commands</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">        -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> npm ci</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    build</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">      commands</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">        -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> npm run build</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  artifacts</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    baseDirectory</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> .output/public</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    files</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">**/*</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  cache</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    paths</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> node_modules/**/*</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="十、部署工作流最佳实践" tabindex="-1">十、部署工作流最佳实践 <a class="header-anchor" href="#十、部署工作流最佳实践" aria-label="Permalink to &quot;十、部署工作流最佳实践&quot;">​</a></h2><p>1.<strong>CI/CD 流水线示例</strong></p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># GitHub Actions 示例</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Deploy Nuxt App</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;">on</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  push</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    branches</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> [</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">main</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">jobs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">  build-and-deploy</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    runs-on</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">    steps</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Checkout</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        uses</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">        </span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Setup Node</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        uses</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        with</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          node-version</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 18</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">          </span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        run</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> npm ci</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">        </span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Build application</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        run</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> npm run build</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        env</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          NUXT_APP_BASE_URL</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> /</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">          </span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">      -</span><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;"> name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> Deploy to production</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        uses</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> appleboy/ssh-action@master</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">        with</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          host</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> \${{ secrets.SSH_HOST }}</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          username</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> \${{ secrets.SSH_USER }}</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          key</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;"> \${{ secrets.SSH_KEY }}</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#8FBCBB;">          script</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> |</span></span>
<span class="line"><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">            cd /var/www/myapp</span></span>
<span class="line"><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">            git pull</span></span>
<span class="line"><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">            npm ci</span></span>
<span class="line"><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">            pm2 restart nuxt-app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>2.<strong>零停机部署策略</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 1. 构建新版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npm</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> run</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 2. 启动新实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> start</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/server/index.mjs</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --name</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">nuxt-app-v2</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 3. 流量切换</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> reload</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxt-app-v2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 4. 停止旧实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> stop</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> nuxt-app-v1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="十一、常见问题解决方案" tabindex="-1">十一、常见问题解决方案 <a class="header-anchor" href="#十一、常见问题解决方案" aria-label="Permalink to &quot;十一、常见问题解决方案&quot;">​</a></h2><ol><li>路由404问题</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 确保所有动态路由有回退</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  nitro</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    prerender</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      failOnError</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      crawlLinks</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      routes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/404</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li>环境变量未注入</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 使用运行时配置而非process.env</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">const</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> {</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> data</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> }</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> =</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> useFetch</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">&#39;/api/data&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">,</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  headers:</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">    Authorization:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">Bearer</span><span style="--shiki-light:#22863A;--shiki-dark:#81A1C1;"> \${</span><span style="--shiki-light:#22863A;--shiki-dark:#D8DEE9;">useRuntimeConfig</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">().</span><span style="--shiki-light:#22863A;--shiki-dark:#D8DEE9;">apiSecret</span><span style="--shiki-light:#22863A;--shiki-dark:#81A1C1;">}</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">\`</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>静态资源加载失败</li></ol><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// 配置baseURL</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  app</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    baseURL</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">NODE_ENV</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> ===</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">production</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> ?</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/sub-path/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> :</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">/</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li>内存泄漏处理</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># 使用--max-old-space-size限制内存</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">NODE_OPTIONS</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">--max-old-space-size=1024</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> pm2</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> start</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="十二、部署检查清单" tabindex="-1">十二、部署检查清单 <a class="header-anchor" href="#十二、部署检查清单" aria-label="Permalink to &quot;十二、部署检查清单&quot;">​</a></h2><p>部署前检查：</p><ul><li>确认 <code>nuxi typecheck</code> 通过</li><li>验证生产环境构建 NODE_ENV=production nuxi build</li><li>测试关键功能在生产模式下的表现</li><li>检查环境变量是否完整配置</li></ul><p>部署后验证：</p><ul><li>访问主页检查状态码</li><li>测试API路由功能</li><li>验证静态资源加载</li><li>检查控制台错误日志</li><li>运行Lighthouse性能测试</li></ul><p>监控配置：</p><ul><li>错误监控（Sentry/Bugsnag）</li><li>性能监控（New Relic/Datadog）</li><li>日志收集（ELK/Pino）</li><li>健康检查端点</li></ul><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// server/api/healthz.get.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineEventHandler</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">()</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> status</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">ok</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="总结-部署策略选择指南" tabindex="-1">总结：部署策略选择指南 <a class="header-anchor" href="#总结-部署策略选择指南" aria-label="Permalink to &quot;总结：部署策略选择指南&quot;">​</a></h2><p>决策矩阵：</p><table tabindex="0"><thead><tr><th><strong>考虑因素</strong></th><th><strong>Node服务器</strong></th><th><strong>静态站点</strong></th><th><strong>Serverless</strong></th><th><strong>边缘计算</strong></th></tr></thead><tbody><tr><td>内容动态性</td><td>高</td><td>低</td><td>中-高</td><td>中-高</td></tr><tr><td>流量波动</td><td>中</td><td>低</td><td>高</td><td>高</td></tr><tr><td>全球分布需求</td><td>低</td><td>高</td><td>中</td><td>高</td></tr><tr><td>冷启动延迟</td><td>无</td><td>无</td><td>可能有</td><td>极低</td></tr><tr><td>运维复杂度</td><td>高</td><td>低</td><td>低</td><td>低</td></tr><tr><td>成本效益</td><td>中</td><td>高</td><td>按需</td><td>按需</td></tr></tbody></table><hr><p>最佳实践建议：</p><ul><li>内容型网站：静态站点生成 + CDN（Vercel/Netlify）</li><li>企业应用：Node服务器 + Docker + 负载均衡</li><li>电商平台：混合渲染 + 边缘计算</li><li>内部系统：Serverless函数 + API网关</li><li>全球应用：边缘计算部署（Cloudflare Workers）</li></ul><hr><p>关键注意事项：</p><ul><li>环境一致性：确保开发、测试、生产环境一致</li><li>配置安全：敏感信息使用运行时配置或密钥管理服务</li><li>版本控制：部署包包含版本信息便于回滚</li><li>渐进式部署：使用金丝雀发布降低风险</li><li>监控先行：部署前设置好监控系统</li></ul><hr><p>通过合理选择部署策略和优化配置，Nuxt3应用可以实现：</p><ul><li>99.95%+ 的可用性</li><li>全球用户 &lt;100ms 的延迟</li><li>毫秒级冷启动时间</li><li>自动弹性伸缩能力</li><li>高效的成本控制</li></ul><blockquote><p><strong>最终建议</strong>：根据业务需求选择最适合的部署方式，并定期审查部署策略以适应业务发展。</p></blockquote>`,103)]))}const g=i(p,[["render",h]]);export{E as __pageData,g as default};
