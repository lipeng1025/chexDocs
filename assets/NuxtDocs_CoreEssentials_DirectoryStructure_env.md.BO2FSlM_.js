import{_ as i,c as n,o as a,ag as p}from"./chunks/framework.DgDu2bHw.js";const c=JSON.parse('{"title":".env","description":"","frontmatter":{},"headers":[],"relativePath":"NuxtDocs/CoreEssentials/DirectoryStructure/env.md","filePath":"NuxtDocs/CoreEssentials/DirectoryStructure/env.md"}'),e={name:"NuxtDocs/CoreEssentials/DirectoryStructure/env.md"};function l(t,s,h,r,k,d){return a(),n("div",null,s[0]||(s[0]=[p(`<h1 id="env" tabindex="-1">.env <a class="header-anchor" href="#env" aria-label="Permalink to &quot;.env&quot;">â€‹</a></h1><details class="details custom-block"><summary>ç†è®ºé˜è¿°</summary><p><strong>ğŸ§  æ ¸å¿ƒæ¦‚å¿µ</strong></p><blockquote><ul><li><code>.env</code> æ–‡ä»¶æ˜¯<strong>å­˜å‚¨ç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶</strong>ï¼Œç”¨äºåœ¨ä¸åŒç¯å¢ƒï¼ˆå¼€å‘/ç”Ÿäº§ï¼‰ä¸­å®‰å…¨ç®¡ç†æ•æ„Ÿæ•°æ®å’Œé…ç½®ã€‚</li></ul></blockquote><hr><p><strong>ğŸš« å¼€å‘è€…é¡»çŸ¥ï¼ˆæœ€é‡è¦ï¼ï¼‰</strong></p><blockquote><ul><li><strong>ç»ä¸æäº¤</strong>ï¼šå¿…é¡»æ·»åŠ åˆ° <code>.gitignore</code>ï¼ˆé˜²æ­¢æ³„éœ²å¯†é’¥ï¼‰</li><li><strong>å‘½åè§„èŒƒ</strong>ï¼š<code>.env</code> ç”¨äºæœ¬åœ°å¼€å‘ï¼Œ<code>.env.production</code> ç”¨äºç”Ÿäº§</li><li><strong>è‡ªåŠ¨åŠ è½½</strong>ï¼šNuxt å¯åŠ¨æ—¶è‡ªåŠ¨è¯»å–</li><li><strong>åˆ†å±‚è¦†ç›–</strong>ï¼šç‰¹å®šç¯å¢ƒæ–‡ä»¶ &gt; é€šç”¨ <code>.env</code> æ–‡ä»¶</li></ul></blockquote><hr><p><strong>ğŸ“ ç›®å½•ç»“æ„ç¤ºä¾‹</strong></p><p>è¿™é‡Œåªæ˜¯ä¸€ä¸ªå‚è€ƒï¼š</p><div class="language-text vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span>é¡¹ç›®æ ¹ç›®å½•/</span></span>
<span class="line"><span>  â”œâ”€â”€ .env                # é€šç”¨ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span>  â”œâ”€â”€ .env.development    # å¼€å‘ç¯å¢ƒç‰¹å®šå˜é‡</span></span>
<span class="line"><span>  â”œâ”€â”€ .env.production     # ç”Ÿäº§ç¯å¢ƒç‰¹å®šå˜é‡</span></span>
<span class="line"><span>  â””â”€â”€ .env.staging        # é¢„å‘å¸ƒç¯å¢ƒå˜é‡</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>âš™ï¸ å·¥ä½œæµç¨‹</strong></p><blockquote><p><strong>1: åº”ç”¨å¯åŠ¨</strong> -&gt; <strong>2: è¯»å– .env æ–‡ä»¶</strong> -&gt; <strong>3: æ³¨å…¥ runtimeConfig</strong> -&gt; <strong>4: ä»£ç ä¸­è®¿é—®</strong></p></blockquote><hr><p><strong>ğŸ’¡ åŸºç¡€ä½¿ç”¨</strong></p><p>1.<strong>åˆ›å»º .env æ–‡ä»¶ï¼š</strong></p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span># .env</span></span>
<span class="line"><span>API_KEY=your_dev_key</span></span>
<span class="line"><span>API_BASE=https://dev.api.example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.<strong>åœ¨ä»£ç ä¸­è®¿é—®ï¼š</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// å®¢æˆ·ç«¯å¯è®¿é—®çš„å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> runtimeConfig</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRuntimeConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">log</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">runtimeConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">public</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">apiBase</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// ä»…æœåŠ¡ç«¯å¯è®¿é—®çš„å˜é‡</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">console</span><span style="--shiki-light:#6F42C1;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">log</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">runtimeConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">apiKey</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>ğŸŒŸ å…³é”®çŸ¥è¯†ç‚¹</strong></p><p>1.<strong>å˜é‡å‰ç¼€è§„åˆ™ï¼š</strong></p><table tabindex="0"><thead><tr><th><strong>å‰ç¼€</strong></th><th><strong>è®¿é—®ä½ç½®</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><code>PUBLIC_</code></td><td>å®¢æˆ·ç«¯+æœåŠ¡ç«¯</td><td><code>PUBLIC_API_BASE</code></td></tr><tr><td>æ— å‰ç¼€</td><td>ä»…æœåŠ¡ç«¯</td><td><code>DB_PASSWORD</code></td></tr></tbody></table><p>2.<strong>ç¯å¢ƒæ–‡ä»¶åŠ è½½é¡ºåºï¼š</strong></p><blockquote><ul><li><code>.env.\${NODE_ENV}</code></li><li><code>.env</code></li><li>ç³»ç»Ÿç¯å¢ƒå˜é‡</li></ul></blockquote><p>3.<strong>å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  runtimeConfig</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    apiKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"> // ä¼šè¢« .env è¦†ç›–</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    public</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      apiBase</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;&#39;</span><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"> // ä¼šè¢« PUBLIC_API_BASE è¦†ç›–</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><p><strong>âš¡ï¸ å®ç”¨æŠ€å·§</strong></p><p>1.<strong>å¤šç¯å¢ƒç®¡ç†ï¼š</strong></p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span># .env.development</span></span>
<span class="line"><span>API_KEY=dev_12345</span></span>
<span class="line"><span>PUBLIC_API_BASE=https://dev.api.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span># .env.production</span></span>
<span class="line"><span>API_KEY=prod_67890</span></span>
<span class="line"><span>PUBLIC_API_BASE=https://api.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>2.<strong>ç±»å‹å®‰å…¨é…ç½®ï¼š</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// nuxt.config.ts</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineNuxtConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  runtimeConfig</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    apiKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">API_KEY</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> ||</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">default_key</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    public</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">      apiBase</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> process</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">env</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;">PUBLIC_API_BASE</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> ||</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">https://default.api</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">  typescript</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    shim</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> false</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">    strict</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#81A1C1;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>3.<strong>æ•æ„Ÿæ•°æ®ä¿æŠ¤ï¼š</strong></p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span># æ­£ç¡®ï¼šæœåŠ¡ç«¯ä¸“ç”¨å˜é‡</span></span>
<span class="line"><span>DB_PASSWORD=s3cr3tP@ss</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å±é™©ï¼šä¸è¦è¿™æ ·æš´éœ²ç»™å®¢æˆ·ç«¯</span></span>
<span class="line"><span>PUBLIC_DB_PASSWORD=s3cr3tP@ss âŒ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>âš ï¸ å¸¸è§é—®é¢˜</strong></p><p>1.<strong>å˜é‡æœªç”Ÿæ•ˆï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># è§£å†³æ–¹æ¡ˆï¼šé‡å¯æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npm</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> run</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> dev</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> --force</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.<strong>ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># å¯åŠ¨æ—¶æŒ‡å®šç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">NODE_ENV</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">=</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;">production</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> node</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> .output/server/index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3.<strong>å®‰å…¨è­¦å‘Šï¼š</strong></p><div class="language-env vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span># é”™è¯¯ï¼šæäº¤ .env åˆ°ç‰ˆæœ¬æ§åˆ¶</span></span>
<span class="line"><span>git add .env âŒ</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ­£ç¡®ï¼šæ·»åŠ  .env åˆ° .gitignore</span></span>
<span class="line"><span>echo &quot;.env*&quot; &gt;&gt; .gitignore âœ…</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ</strong></p><p>1.<strong>å¯†é’¥ç®¡ç†ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># ä½¿ç”¨åŠ å¯†å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npm</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> install</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> dotenv-vault</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">npx</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> dotenv-vault</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> new</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.<strong>è®¿é—®æ§åˆ¶ï¼š</strong></p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;">// æœåŠ¡ç«¯APIç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">export</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> defineEventHandler</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">event</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> {</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> apiKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> useRuntimeConfig</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">()</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">apiKey</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  const</span><span style="--shiki-light:#1976D2;--shiki-dark:#D8DEE9;"> clientKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> getHeader</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">event</span><span style="--shiki-light:#212121;--shiki-dark:#ECEFF4;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &#39;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">X-API-KEY</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">  </span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">  if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;"> (</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;">apiKey</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> !==</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> clientKey</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">) </span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;">    throw</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;"> createError</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">(</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">{</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> statusCode</span><span style="--shiki-light:#D32F2F;--shiki-dark:#ECEFF4;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 401</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;"> }</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ECEFF4;">}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9FF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>3.<strong>è‡ªåŠ¨å¯†é’¥è½®æ¢ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light nord vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># ä½¿ç”¨CI/CDå·¥å…·å®šæœŸæ›´æ–°å¯†é’¥</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#616E88;"># GitHub Actions ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">-</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> name:</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> Rotate</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> keys</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">  run:</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">    echo</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;"> &quot;</span><span style="--shiki-light:#22863A;--shiki-dark:#A3BE8C;">API_KEY=</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#88C0D0;">openssl</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> rand</span><span style="--shiki-light:#2B5581;--shiki-dark:#A3BE8C;"> -hex</span><span style="--shiki-light:#1976D2;--shiki-dark:#B48EAD;"> 32</span><span style="--shiki-light:#22863A;--shiki-dark:#ECEFF4;">)&quot;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#81A1C1;"> &gt;&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D8DEE9;"> $GITHUB_ENV</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>ğŸ“š å­¦ä¹ èµ„æº</strong></p><blockquote><ul><li><a href="https://nuxt.com/docs/guide/going-further/runtime-config" target="_blank" rel="noreferrer">Nuxt ç¯å¢ƒå˜é‡æ–‡æ¡£</a></li><li><a href="https://www.dotenv.org/docs/security" target="_blank" rel="noreferrer">dotenv å®‰å…¨å®è·µ</a></li><li><a href="https://12factor.net/config" target="_blank" rel="noreferrer">12å› ç´ åº”ç”¨åŸåˆ™</a></li></ul></blockquote><hr><blockquote><p>ğŸ’¡ æç¤ºï¼šæŠŠ <code>.env</code> æ–‡ä»¶æƒ³è±¡æˆä¿é™©ç®± - æŠŠé’¥åŒ™ï¼ˆæ•æ„Ÿæ•°æ®ï¼‰é”åœ¨é‡Œé¢ï¼Œåªè®©æˆæƒäººå‘˜ï¼ˆæœåŠ¡ç«¯ï¼‰è®¿é—®ï¼Œå…¬å…±åŒºåŸŸï¼ˆå®¢æˆ·ç«¯ï¼‰åªå±•ç¤ºéæ•æ„Ÿä¿¡æ¯ï¼</p></blockquote></details>`,2)]))}const o=i(e,[["render",l]]);export{c as __pageData,o as default};
