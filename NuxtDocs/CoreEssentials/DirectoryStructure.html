<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>目录结构</title>
    <meta name="description" content="Chex 开发指南与最佳实践">
    <link rel="stylesheet" href="/chexDocs/assets/style.8cf5563e.css">
    <link rel="modulepreload" href="/chexDocs/assets/app.01436f97.js">
    <link rel="modulepreload" href="/chexDocs/assets/NuxtDocs_CoreEssentials_DirectoryStructure.md.08656e04.lean.js">
    
    <meta name="theme-color" content="#42b983">
  <link rel="icon" href="/chexDocs/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f44a984a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f44a984a data-v-a50780ff><div class="VPNavBar has-sidebar" data-v-a50780ff data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/chexDocs/" data-v-d5925166><!--[--><!--]--><!--[--><img class="VPImage logo" src="/chexDocs/favicon.ico" alt data-v-b7ac6bd3><!--]--><!--[-->Chex 技术知识库<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/chexDocs/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/chexDocs/NuxtDocs/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Nuxt3<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/chexDocs/LaravelDocs/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Laravel12<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/lipeng1025" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-481098f9 data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-481098f9><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-481098f9><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/lipeng1025" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-f44a984a data-v-b6162a8b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b6162a8b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-b6162a8b><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-b6162a8b>Menu</span></button><a class="top-link" href="#" data-v-b6162a8b> Return to top </a></div><aside class="VPSidebar" data-v-f44a984a data-v-a186aa16><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-a186aa16><span class="visually-hidden" id="sidebar-aria-label" data-v-a186aa16> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-a186aa16><section class="VPSidebarGroup collapsible" data-v-a186aa16 data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>📚 Nuxt3: 核心</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link active" href="/chexDocs/NuxtDocs/CoreEssentials/DirectoryStructure.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>目录结构</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/CoreEssentials/ProjectConfiguration.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>项目配置</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/CoreEssentials/Routing.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>路由系统</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/CoreEssentials/DataFetch.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>数据获取</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/CoreEssentials/StateManagement.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>状态管理</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-a186aa16><section class="VPSidebarGroup collapsible collapsed" data-v-a186aa16 data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>⚙️ Nuxt3: 了解</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/RenderingModes.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>渲染模式差异</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/SEOMeta.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>SEO 与 Meta 管理</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/ErrorHandling.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>错误处理与调试</span><!--]--><!----></a><!----><!--]--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>-------------------------------</span><!--]--><!----></span><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/BuildOptimization.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>构建优化</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/UIFrameworkIntegration.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>UI 框架集成</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/Transitions.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>过渡动画</span><!--]--><!----></a><!----><!--]--><!--[--><span class="VPLink link" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>-------------------------------</span><!--]--><!----></span><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/PWASupport.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>PWA 支持</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/chexDocs/NuxtDocs/Overview/Internationalization.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>国际化</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-a186aa16><section class="VPSidebarGroup" data-v-a186aa16 data-v-6e45c352><div class="title" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>🧩 Nuxt3: 其他</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f44a984a data-v-d981fe29><div class="VPDoc has-sidebar has-aside" data-v-d981fe29 data-v-cfb513e0><div class="container" data-v-cfb513e0><div class="aside" data-v-cfb513e0><div class="aside-curtain" data-v-cfb513e0></div><div class="aside-container" data-v-cfb513e0><div class="aside-content" data-v-cfb513e0><div class="VPDocAside" data-v-cfb513e0 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-cfb513e0><div class="content-container" data-v-cfb513e0><!--[--><!--]--><main class="main" data-v-cfb513e0><div style="position:relative;" class="vp-doc _chexDocs_NuxtDocs_CoreEssentials_DirectoryStructure" data-v-cfb513e0><div><h1 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-hidden="true">#</a></h1><div class="tree-nav custom-style" data-v-7f1e3ba8><!--[--><div class="tree-group" data-v-7f1e3ba8><a href="#FunctionModules" data-v-7f1e3ba8><h3 data-v-7f1e3ba8>功能模块</h3></a><ul data-v-7f1e3ba8><!--[--><li data-v-7f1e3ba8><a href="#assets" class="nav-link" data-v-7f1e3ba8>assets</a></li><li data-v-7f1e3ba8><a href="#components" class="nav-link" data-v-7f1e3ba8>components</a></li><li data-v-7f1e3ba8><a href="#composables" class="nav-link" data-v-7f1e3ba8>composables</a></li><li data-v-7f1e3ba8><a href="#layouts" class="nav-link" data-v-7f1e3ba8>layouts</a></li><li data-v-7f1e3ba8><a href="#middleware" class="nav-link" data-v-7f1e3ba8>middleware</a></li><li data-v-7f1e3ba8><a href="#pages" class="nav-link" data-v-7f1e3ba8>pages</a></li><li data-v-7f1e3ba8><a href="#plugins" class="nav-link" data-v-7f1e3ba8>plugins</a></li><li data-v-7f1e3ba8><a href="#utils" class="nav-link" data-v-7f1e3ba8>utils</a></li><!--]--></ul></div><div class="tree-group" data-v-7f1e3ba8><a href="#ApplicationFiles" data-v-7f1e3ba8><h3 data-v-7f1e3ba8>应用文件</h3></a><ul data-v-7f1e3ba8><!--[--><li data-v-7f1e3ba8><a href="#appvue" class="nav-link" data-v-7f1e3ba8>app.vue</a></li><li data-v-7f1e3ba8><a href="#appconfigts" class="nav-link" data-v-7f1e3ba8>app.config.ts</a></li><li data-v-7f1e3ba8><a href="#errorvue" class="nav-link" data-v-7f1e3ba8>error.vue</a></li><!--]--></ul></div><div class="tree-group" data-v-7f1e3ba8><a href="#CoreDirectory" data-v-7f1e3ba8><h3 data-v-7f1e3ba8>核心目录</h3></a><ul data-v-7f1e3ba8><!--[--><li data-v-7f1e3ba8><a href="#nuxt" class="nav-link" data-v-7f1e3ba8>.nuxt</a></li><li data-v-7f1e3ba8><a href="#output" class="nav-link" data-v-7f1e3ba8>.output</a></li><li data-v-7f1e3ba8><a href="#public" class="nav-link" data-v-7f1e3ba8>public</a></li><li data-v-7f1e3ba8><a href="#server" class="nav-link" data-v-7f1e3ba8>server</a></li><li data-v-7f1e3ba8><a href="#shared" class="nav-link" data-v-7f1e3ba8>shared</a></li><!--]--></ul></div><div class="tree-group" data-v-7f1e3ba8><a href="#ConfigurationDirectory" data-v-7f1e3ba8><h3 data-v-7f1e3ba8>配置目录</h3></a><ul data-v-7f1e3ba8><!--[--><li data-v-7f1e3ba8><a href="#content" class="nav-link" data-v-7f1e3ba8>content</a></li><li data-v-7f1e3ba8><a href="#modules" class="nav-link" data-v-7f1e3ba8>modules</a></li><!--]--></ul></div><div class="tree-group" data-v-7f1e3ba8><a href="#RootDirectoryFiles" data-v-7f1e3ba8><h3 data-v-7f1e3ba8>根目录文件</h3></a><ul data-v-7f1e3ba8><!--[--><li data-v-7f1e3ba8><a href="#env" class="nav-link" data-v-7f1e3ba8>.env</a></li><li data-v-7f1e3ba8><a href="#gitignore" class="nav-link" data-v-7f1e3ba8>.gitignore</a></li><li data-v-7f1e3ba8><a href="#nuxtrc" class="nav-link" data-v-7f1e3ba8>.nuxtrc</a></li><li data-v-7f1e3ba8><a href="#nuxtconfigts" class="nav-link" data-v-7f1e3ba8>nuxt.config.ts</a></li><li data-v-7f1e3ba8><a href="#nodemodules" class="nav-link" data-v-7f1e3ba8>node_modules</a></li><li data-v-7f1e3ba8><a href="#packagejson" class="nav-link" data-v-7f1e3ba8>package.json</a></li><li data-v-7f1e3ba8><a href="#tsconfigjson" class="nav-link" data-v-7f1e3ba8>tsconfig.json</a></li><!--]--></ul></div><!--]--></div><h2 id="功能模块" tabindex="-1">功能模块 <a class="header-anchor" href="#功能模块" aria-hidden="true">#</a></h2><h3 id="assets" tabindex="-1">assets <a class="header-anchor" href="#assets" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 assets 目录？</strong></p><blockquote><ul><li><code>assets</code> 目录是存放项目中需要构建处理的静态资源的地方。这些文件在项目构建时会被处理、优化，然后打包到最终产物中。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li>存放需要被构建工具<code>（Vite/Webpack）</code>处理的静态资源</li><li>支持别名 <code>~/assets</code> 方便引用</li><li>文件会经过优化处理（如：图片压缩、样式预编译等）</li><li>适合存放需要转换或优化的资源</li></ul></blockquote><hr><p><strong>3. 常见存放内容：</strong></p><blockquote><ul><li>样式文件<code>（CSS、SCSS、Less、Stylus）</code></li><li>需要优化的图片<code>（PNG、JPG、SVG等）</code></li><li>字体文件<code>（.woff, .ttf）</code></li><li>SVG图标<code>（可转换为Vue组件）</code></li><li>其他需要构建处理的资源<code>（如数据JSON）</code></li></ul></blockquote><hr><p><strong>4. 目录结构建议：</strong></p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">assets/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── images/       # 存放图片</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── styles/       # 存放样式文件（全局样式、变量等）</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── fonts/        # 存放字体文件</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── icons/        # 存放图标（SVG文件）</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── data/         # 存放静态数据（如数据JSON）</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">assets/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── images/       # 存放图片</span></span>
<span class="line"><span style="color:#24292eff;">  ├── styles/       # 存放样式文件（全局样式、变量等）</span></span>
<span class="line"><span style="color:#24292eff;">  ├── fonts/        # 存放字体文件</span></span>
<span class="line"><span style="color:#24292eff;">  ├── icons/        # 存放图标（SVG文件）</span></span>
<span class="line"><span style="color:#24292eff;">  └── data/         # 存放静态数据（如数据JSON）</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>5. 需要引入才能使用吗？</strong></p><blockquote><ul><li>是的，<code>assets</code>目录中的文件需要引入才能在组件、页面或工具类中使用。不能像<code>public</code>目录那样直接通过路径访问。</li></ul></blockquote><hr><p><strong>6. 与public目录的区别：</strong></p><table><thead><tr><th>特性</th><th>assets 目录</th><th>public 目录</th></tr></thead><tbody><tr><td>构建处理</td><td>✓ (编译/优化)</td><td>✗ (原样复制)</td></tr><tr><td>引用方式</td><td><code>~/assets/path</code></td><td><code>/filename</code> (比如: <code>/favicon.ico</code>)</td></tr><tr><td>适用场景</td><td>样式/字体/图片/视频/需优化资源</td><td>直接暴露的静态文件（比如: 项目Logo）</td></tr><tr><td>路径变化</td><td>构建后路径会变化（可能出现上线的项目静态资源不显示，比如: 图片）</td><td>保持原路径</td></tr></tbody></table><hr><p><strong>7. 配置相关：</strong><br>   在 <mark>nuxt.config.ts</mark> 中，可以配置资源处理方式：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 配置Vite处理资源</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">vite</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 这里的配置用处是全局引入scss定义的常量，</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 在组件内可以直接使用，无需再引入</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">css</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#D8DEE9;">preprocessorOptions</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">          </span><span style="color:#D8DEE9;">scss</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">            </span><span style="color:#D8DEE9;">additionalData</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">@use &quot;~/assets/styles/variables.scss&quot; as *;</span><span style="color:#ECEFF4;">`</span></span>
<span class="line"><span style="color:#D8DEE9FF;">          </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 配置Vite处理资源</span></span>
<span class="line"><span style="color:#24292EFF;">    vite</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 这里的配置用处是全局引入scss定义的常量，</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 在组件内可以直接使用，无需再引入</span></span>
<span class="line"><span style="color:#24292EFF;">      css</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">        preprocessorOptions</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">          scss</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">            additionalData</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">`@use &quot;~/assets/styles/variables.scss&quot; as *;`</span></span>
<span class="line"><span style="color:#24292EFF;">          }</span></span>
<span class="line"><span style="color:#24292EFF;">        }</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 在Vue组件中使用图片</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 方式1：直接使用路径（需要require） --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;img</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#88C0D0;">require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/images/logo.png</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">alt</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Logo</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 方式2：导入后使用 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;img</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">logo</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">alt</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Logo</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 方式3：动态路径 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;img</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#88C0D0;">getImage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">banner</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">alt</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Banner</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 导入静态图片</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">logo</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">from</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/images/logo.png</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 动态获取图片路径</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">getImage</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">~/assets/images/</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.jpg</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 方式1：直接使用路径（需要require） --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">src</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#6F42C1;">require</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/assets/images/logo.png&#39;</span><span style="color:#24292EFF;">)</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;Logo&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 方式2：导入后使用 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">src</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">logo</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;Logo&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 方式3：动态路径 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">src</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#6F42C1;">getImage</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;banner&#39;</span><span style="color:#24292EFF;">)</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;Banner&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 导入静态图片</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> logo </span><span style="color:#D32F2F;">from</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/assets/images/logo.png&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 动态获取图片路径</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">getImage</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> (name) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">`~/assets/images/</span><span style="color:#D32F2F;">${</span><span style="color:#24292EFF;">name</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">.jpg`</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><hr><p><strong>2. 使用样式文件</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 导入全局样式</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/styles/global.css</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">scoped</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">/* 在样式中引用assets资源 */</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">header</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#D8DEE9;">background-image</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">url</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/images/header-bg.jpg</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#D8DEE9;">font-family</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">CustomFont</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> </span><span style="color:#81A1C1;">sans-serif;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 导入全局样式</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/assets/styles/global.css&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">/* 在样式中引用assets资源 */</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">.header</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#1976D2;">background-image</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">url</span><span style="color:#1976D2;">(</span><span style="color:#22863A;">&#39;~/assets/images/header-bg.jpg&#39;</span><span style="color:#1976D2;">)</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#1976D2;">font-family</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;CustomFont&#39;</span><span style="color:#212121;">,</span><span style="color:#1976D2;"> sans-serif</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><p><strong>3. 使用Scss/Less</strong></p><div class="language-scss line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 在 assets/styles/variables.scss 文件中定义常量</span></span>
<span class="line"><span style="color:#D8DEE9FF;">$primary-color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">3b82f6</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">$secondary-color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">10b981</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 在 assets/styles/variables.scss 文件中定义常量</span></span>
<span class="line"><span style="color:#24292EFF;">$primary-color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> #3b82f6;</span></span>
<span class="line"><span style="color:#24292EFF;">$secondary-color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> #10b981;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">lang</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">scss</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">scoped</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;">// 在上面的scss中已经定义了两个常量，这里在组件内引入使用</span></span>
<span class="line"><span style="color:#616E88;">// 注意：这里是局部引入，想要全局引入请参考 👉 [理论阐述-&gt;7. 配置相关]</span></span>
<span class="line"><span style="color:#81A1C1;">@use</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">~/assets/styles/variables</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">as</span><span style="color:#D8DEE9FF;"> vars</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">background-color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">vars</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">$primary-color</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">white;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&amp;</span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">hover</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">background-color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">darken</span><span style="color:#ECEFF4;">(</span><span style="color:#88C0D0;">vars</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">$primary-color</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> </span><span style="color:#B48EAD;">10</span><span style="color:#81A1C1;">%</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;scss&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">// 在上面的scss中已经定义了两个常量，这里在组件内引入使用</span></span>
<span class="line"><span style="color:#C2C3C5;">// 注意：这里是局部引入，想要全局引入请参考 👉 [理论阐述-&gt;7. 配置相关]</span></span>
<span class="line"><span style="color:#D32F2F;">@use</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&quot;~/assets/styles/variables&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">as</span><span style="color:#24292EFF;"> vars;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.button</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">background-color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">vars.$primary-color</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">white</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#22863A;">&amp;</span><span style="color:#6F42C1;">:hover</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#1976D2;">background-color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">darken</span><span style="color:#1976D2;">(vars.$primary-color</span><span style="color:#212121;">,</span><span style="color:#1976D2;"> 10</span><span style="color:#D32F2F;">%</span><span style="color:#1976D2;">)</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><p><strong>4. 使用字体文件</strong></p><div class="language-css line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">/* assets/styles/fonts.css */</span></span>
<span class="line"><span style="color:#81A1C1;">@font-face</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">font-family</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">CustomFont</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">src</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">url</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/fonts/custom-font.woff2</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">)</span><span style="color:#88C0D0;"> format</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">woff2</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">),</span></span>
<span class="line"><span style="color:#88C0D0;">      url</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/fonts/custom-font.woff</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">)</span><span style="color:#88C0D0;"> format</span><span style="color:#ECEFF4;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">woff</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">font-weight</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">400</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">font-style</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">normal;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">/* assets/styles/fonts.css */</span></span>
<span class="line"><span style="color:#D32F2F;">@font-face</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">font-family</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;CustomFont&#39;</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">src</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">url</span><span style="color:#1976D2;">(</span><span style="color:#22863A;">&#39;~/assets/fonts/custom-font.woff2&#39;</span><span style="color:#1976D2;">) </span><span style="color:#6F42C1;">format</span><span style="color:#1976D2;">(</span><span style="color:#22863A;">&#39;woff2&#39;</span><span style="color:#1976D2;">)</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#1976D2;">      </span><span style="color:#6F42C1;">url</span><span style="color:#1976D2;">(</span><span style="color:#22863A;">&#39;~/assets/fonts/custom-font.woff&#39;</span><span style="color:#1976D2;">) </span><span style="color:#6F42C1;">format</span><span style="color:#1976D2;">(</span><span style="color:#22863A;">&#39;woff&#39;</span><span style="color:#1976D2;">)</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">font-weight</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">400</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">font-style</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">normal</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 在组件中导入字体</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/styles/fonts.css</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 使用fonts.css中自定义的类名 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">custom-font</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">使用自定义字体</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 在组件中导入字体</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/assets/styles/fonts.css&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 使用fonts.css中自定义的类名 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;custom-font&quot;</span><span style="color:#24292EFF;">&gt;使用自定义字体&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><p><strong>5. 使用SVG图标</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 导入SVG作为组件</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 当然你也可以将SVG图标引入之后放到img标签的src中使用</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 相关用法可以参考 👉 [1. 在Vue组件中使用图片]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">LogoIcon</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">from</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/icons/logo.svg?component</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">LogoIcon</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 导入SVG作为组件</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 当然你也可以将SVG图标引入之后放到img标签的src中使用</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 相关用法可以参考 👉 [1. 在Vue组件中使用图片]</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> LogoIcon </span><span style="color:#D32F2F;">from</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/assets/icons/logo.svg?component&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">LogoIcon</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><p><strong>6. 使用JSON数据</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 导入JSON数据</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">productData</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">from</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/data/products.json</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// ref 是Vue3中定义一个响应式的变量所使用的函数</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">products</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">productData</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-for</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">product</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">in</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">products</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">key</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">product</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">id</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;h3&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">product</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/h3&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">product</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">description</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 导入JSON数据</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> productData </span><span style="color:#D32F2F;">from</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/assets/data/products.json&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// ref 是Vue3中定义一个响应式的变量所使用的函数</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">products</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(productData)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-for</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">product </span><span style="color:#D32F2F;">in</span><span style="color:#24292EFF;"> products</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">key</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#1976D2;">product</span><span style="color:#24292EFF;">.id</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">h3</span><span style="color:#24292EFF;">&gt;{{ </span><span style="color:#1976D2;">product</span><span style="color:#24292EFF;">.name }}&lt;/</span><span style="color:#22863A;">h3</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;{{ </span><span style="color:#1976D2;">product</span><span style="color:#24292EFF;">.description }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 图片优化注意事项</strong></p><ul><li>大图片（&gt;4KB）建议放在<code>assets</code>进行优化</li><li>小图标（&lt;4KB）可以考虑放在<code>public</code>目录或内联为<code>Base64</code></li></ul><hr><p><strong>2. 样式文件全局导入</strong><br> 可以在 <mark>nuxt.config.ts</mark> 中全局导入样式文件：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">css</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/styles/main.css</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/assets/styles/variables.scss</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ]</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  css</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#22863A;">&#39;~/assets/styles/main.css&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#22863A;">&#39;~/assets/styles/variables.scss&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  ]</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>注意：由于全局导入，所有相关的样式都会受到影响</p></blockquote><hr><p><strong>3. 动态路径问题</strong><br> 由于构建工具需要知道所有资源路径，动态路径不能直接使用别名：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 错误：动态路径不能这样使用 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;img</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;`</span><span style="color:#A3BE8C;">~/assets/images/</span><span style="color:#ECEFF4;">${</span><span style="color:#D8DEE9;">imageName</span><span style="color:#ECEFF4;">}</span><span style="color:#A3BE8C;">.png</span><span style="color:#ECEFF4;">`&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 正确：使用require或i<wbr>mport.meta.url --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;img</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">src</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#88C0D0;">getImage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">imageName</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">getImage</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">~/assets/images/</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.png</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">        </span><span style="color:#616E88;">// 或</span></span>
<span class="line"><span style="color:#ECEFF4;">        </span><span style="color:#616E88;">// return new URL(`./assets/images/${name}.png`, i<wbr>mport.meta.url).href</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 错误：动态路径不能这样使用 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">src</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#22863A;">`~/assets/images/</span><span style="color:#D32F2F;">${</span><span style="color:#24292EFF;">imageName</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">.png`</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 正确：使用require或i<wbr>mport.meta.url --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">src</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#6F42C1;">getImage</span><span style="color:#24292EFF;">(imageName)</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">getImage</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> (name) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">require</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">`~/assets/images/</span><span style="color:#D32F2F;">${</span><span style="color:#24292EFF;">name</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">.png`</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#C2C3C5;">// 或</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#C2C3C5;">// return new URL(`./assets/images/${name}.png`, i<wbr>mport.meta.url).href</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>注意：避免项目构建发布之后，图片不显示的一些异常问题</p></blockquote><hr><p><strong>4. SVG使用建议</strong></p><ul><li>使用<code>?component</code>后缀将SVG转换为Vue组件</li><li>安装<code>vite-svg-loader</code>可以简化使用：</li></ul><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#D8DEE9FF;">npm install vite-svg-loader</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">npm install vite-svg-loader</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在<mark>nuxt.config.ts</mark> 中配置：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">vite</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">plugins</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">svgLoader</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    ]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  vite</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    plugins</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#6F42C1;">svgLoader</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">    ]</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><p><strong>5. 构建结果</strong><br> 构建后，<code>assets</code>中的文件会被处理并输出到 <code>_nuxt</code> 目录下，文件名会包含哈希值用于缓存：</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">/_nuxt/</span></span>
<span class="line"><span style="color:#d8dee9ff;">├── images/</span></span>
<span class="line"><span style="color:#d8dee9ff;">│   └── logo.123abc.png</span></span>
<span class="line"><span style="color:#d8dee9ff;">├── fonts/</span></span>
<span class="line"><span style="color:#d8dee9ff;">│   └── custom-font.456def.woff2</span></span>
<span class="line"><span style="color:#d8dee9ff;">└── styles/</span></span>
<span class="line"><span style="color:#d8dee9ff;">    └── main.789ghi.css</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">/_nuxt/</span></span>
<span class="line"><span style="color:#24292eff;">├── images/</span></span>
<span class="line"><span style="color:#24292eff;">│   └── logo.123abc.png</span></span>
<span class="line"><span style="color:#24292eff;">├── fonts/</span></span>
<span class="line"><span style="color:#24292eff;">│   └── custom-font.456def.woff2</span></span>
<span class="line"><span style="color:#24292eff;">└── styles/</span></span>
<span class="line"><span style="color:#24292eff;">    └── main.789ghi.css</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><p><strong>6. 最佳实践</strong></p><ol><li><strong>图片</strong>： <ul><li>需要优化的图片 → assets</li><li>直接使用的静态文件 → public</li></ul></li><li><strong>样式</strong>： <ul><li>全局样式 → 通过nuxt.config全局导入</li><li>组件样式 → 使用scoped CSS</li><li>变量/混合 → 放在assets/styles</li></ul></li><li><strong>字体</strong>： <ul><li>使用WOFF2格式（现代浏览器）</li><li>提供WOFF作为备选</li></ul></li><li><strong>数据</strong>： <ul><li>小型静态数据 → assets/data</li><li>大型数据 → 考虑放在public或使用API</li></ul></li><li><strong>SVG图标</strong>： <ul><li>常用图标 → 转换为Vue组件</li><li>偶尔使用 → 放在public或内联</li></ul></li></ol><hr><p><strong>7. 常见错误</strong></p><ul><li><strong>404错误</strong>：路径错误，确保使用<code>~/assets/</code>前缀</li><li><strong>构建失败</strong>：检查文件是否存在，路径是否正确</li><li><strong>样式未生效</strong>：检查是否正确定义和导入</li><li><strong>图片未优化</strong>：确认文件在<code>assets</code>目录而非<code>public</code></li></ul><hr><!--]--></div></div><hr><h3 id="components" tabindex="-1">components <a class="header-anchor" href="#components" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 components 目录？</strong></p><blockquote><ul><li><code>components</code> 目录是存放项目中可复用 Vue 组件的地方。这个目录下的组件会自动被 Nuxt3 注册，让你可以在整个项目中直接使用它们，不需要手动导入。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li><strong>自动组件注册：</strong> 组件无需手动导入，开箱即用</li><li><strong>按需加载：</strong> 组件只在需要时加载，优化性能</li><li><strong>统一管理：</strong> 集中存放所有可复用组件</li><li><strong>命名简化：</strong> 文件名直接作为组件名使用</li></ul></blockquote><hr><p><strong>3. 核心特性</strong></p><blockquote><ul><li><strong>自动导入：</strong> 无需手动引入，直接在模板中使用</li><li><strong>命名规则：</strong> 文件名自动转换为 PascalCase 组件名</li><li><strong>嵌套结构：</strong> 支持子目录组织组件</li><li><strong>动态导入：</strong> 默认支持代码分割</li></ul></blockquote><hr><p><strong>4. 目录结构建议&amp;组件命名规则</strong></p><blockquote><p>当然在实际开发的项目中是由具体的项目而定，这里只是给个参考</p></blockquote><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">components/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── Button.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── base/             # 基础组件 (Button, Input, Card等)</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── Button.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── Input.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── ui/               # UI组件 (Modal, Dropdown, Tabs等)</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── Modal.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── Tabs.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── layout/           # 布局相关组件</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── Header.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── Footer.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── icons/            # 图标组件</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── LogoIcon.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── global/           # 全局组件 (需要全局注册的)</span></span>
<span class="line"><span style="color:#d8dee9ff;">      └── Toast.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">components/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── Button.vue</span></span>
<span class="line"><span style="color:#24292eff;">  ├── base/             # 基础组件 (Button, Input, Card等)</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── Button.vue</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── Input.vue</span></span>
<span class="line"><span style="color:#24292eff;">  ├── ui/               # UI组件 (Modal, Dropdown, Tabs等)</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── Modal.vue</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── Tabs.vue</span></span>
<span class="line"><span style="color:#24292eff;">  ├── layout/           # 布局相关组件</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── Header.vue</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── Footer.vue</span></span>
<span class="line"><span style="color:#24292eff;">  ├── icons/            # 图标组件</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── LogoIcon.vue</span></span>
<span class="line"><span style="color:#24292eff;">  └── global/           # 全局组件 (需要全局注册的)</span></span>
<span class="line"><span style="color:#24292eff;">      └── Toast.vue</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><table><thead><tr><th><strong>文件位置</strong></th><th><strong>组件名</strong></th><th><strong>使用方式</strong></th></tr></thead><tbody><tr><td><code>Button.vue</code></td><td><code>&lt;Button&gt;</code></td><td>直接使用</td></tr><tr><td><code>base/Input.vue</code></td><td><code>&lt;BaseInput&gt;</code></td><td>目录名作为前缀</td></tr><tr><td><code>ui/modal/ConfirmModal.vue</code></td><td><code>&lt;UiModalConfirmModal&gt;</code></td><td>多级目录组合前缀</td></tr></tbody></table><hr><p><strong>6. 需要手动导入吗？</strong></p><blockquote><ul><li><strong>不需要！</strong> 这是 <code>components</code> 目录最大的优势。你只需要：<br> 1：在 <code>components</code> 目录创建 <code>.vue</code> 文件<br> 2：在模板中直接使用组件名<br> 3：Nuxt3 会自动处理导入和注册</li></ul></blockquote><hr><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 基础组件使用</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- components/Button.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- components/Button.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><code>pages/</code> 是Nuxt3主要的目录之一,存放的是项目主要的页面</p></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/index.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 直接使用组件 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Button</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">点击我</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">Button</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#616E88;">&lt;!-- 不需要在 script 中导入 --&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/index.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 直接使用组件 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">Button</span><span style="color:#24292EFF;">&gt;点击我&lt;/</span><span style="color:#1976D2;">Button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">&lt;!-- 不需要在 script 中导入 --&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><p><strong>2. 带前缀的组件</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- components/base/Input.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;input</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">value</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">modelValue</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">input</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#88C0D0;">$emit</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">update:modelValue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">$event</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// defineProps: 用于接收父组件传递的参数</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// defineEmits: 用于子组件修改父组件的参数</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">//              也可以理解为事件传递，事件传递到父组件之后</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">//              除了可以修改参数，也可以做其他的逻辑处理</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">defineProps</span><span style="color:#D8DEE9FF;">([</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">modelValue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">])</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">defineEmits</span><span style="color:#D8DEE9FF;">([</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">update:modelValue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">])</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- components/base/Input.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292EFF;"> </span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">value</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">modelValue</span><span style="color:#24292EFF;">&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">input</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#6F42C1;">$emit</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;update:modelValue&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">$event</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">target</span><span style="color:#24292EFF;">.value)</span><span style="color:#24292EFF;">&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">    /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// defineProps: 用于接收父组件传递的参数</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// defineEmits: 用于子组件修改父组件的参数</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">//              也可以理解为事件传递，事件传递到父组件之后</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">//              除了可以修改参数，也可以做其他的逻辑处理</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">defineProps</span><span style="color:#24292EFF;">([</span><span style="color:#22863A;">&#39;modelValue&#39;</span><span style="color:#24292EFF;">])</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">defineEmits</span><span style="color:#24292EFF;">([</span><span style="color:#22863A;">&#39;update:modelValue&#39;</span><span style="color:#24292EFF;">])</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/contact.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;form&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#616E88;">&lt;!-- 使用带前缀的组件 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">BaseInput</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-model</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">placeholder</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">请输入姓名</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Button</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">提交</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">Button</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/form&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">name</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/contact.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">form</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">&lt;!-- 使用带前缀的组件 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#1976D2;">BaseInput</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-model</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">name</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">placeholder</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;请输入姓名&quot;</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#1976D2;">Button</span><span style="color:#24292EFF;">&gt;提交&lt;/</span><span style="color:#1976D2;">Button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">form</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">name</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><p><strong>3. 嵌套组件</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- components/ui/Tabs.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">tabs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">tabs-header</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#8FBCBB;">v-for</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">tab</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">index</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">in</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">tabs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">key</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">index</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">activeTab</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">index</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">tab</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">title</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">tabs-content</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">name</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;`</span><span style="color:#A3BE8C;">tab-</span><span style="color:#ECEFF4;">${</span><span style="color:#D8DEE9;">activeTab</span><span style="color:#ECEFF4;">}`&quot;</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">tabs</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">基本信息</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">},</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">详细信息</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">},</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">设置</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">activeTab</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- components/ui/Tabs.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;tabs&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;tabs-header&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#6F42C1;">v-for</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">(tab</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> index) </span><span style="color:#D32F2F;">in</span><span style="color:#24292EFF;"> tabs</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">key</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">index</span><span style="color:#24292EFF;">&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">activeTab </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> index</span><span style="color:#24292EFF;">&quot;</span></span>
<span class="line"><span style="color:#24292EFF;">      &gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        {{ </span><span style="color:#1976D2;">tab</span><span style="color:#24292EFF;">.title }}</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;tabs-content&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">name</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#22863A;">`tab-</span><span style="color:#D32F2F;">${</span><span style="color:#24292EFF;">activeTab</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">`</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">tabs</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">  { title</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;基本信息&#39;</span><span style="color:#24292EFF;"> }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  { title</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;详细信息&#39;</span><span style="color:#24292EFF;"> }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  { title</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;设置&#39;</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#24292EFF;">]</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">activeTab</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/profile.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">UiTabs</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;template</span><span style="color:#D8DEE9FF;"> #</span><span style="color:#8FBCBB;">tab-0</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">ProfileBasic</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;template</span><span style="color:#D8DEE9FF;"> #</span><span style="color:#8FBCBB;">tab-1</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">ProfileDetails</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;template</span><span style="color:#D8DEE9FF;"> #</span><span style="color:#8FBCBB;">tab-2</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">ProfileSettings</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">UiTabs</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/profile.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#1976D2;">UiTabs</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;"> #</span><span style="color:#6F42C1;">tab-0</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#1976D2;">ProfileBasic</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;"> #</span><span style="color:#6F42C1;">tab-1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#1976D2;">ProfileDetails</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;"> #</span><span style="color:#6F42C1;">tab-2</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#1976D2;">ProfileSettings</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#1976D2;">UiTabs</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><p><strong>4. 动态组件</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;component</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">is</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">currentComponent</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;">// 动态加载组件</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">components</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">stats</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineAsyncComponent</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/dashboard/StatsCard</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">activity</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineAsyncComponent</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/dashboard/ActivityFeed</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">notifications</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineAsyncComponent</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/dashboard/Notifications</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">currentComponent</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">stats</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">component</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">is</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">currentComponent</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">// 动态加载组件</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">components</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  stats</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineAsyncComponent</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/components/dashboard/StatsCard&#39;</span><span style="color:#24292EFF;">))</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  activity</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineAsyncComponent</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/components/dashboard/ActivityFeed&#39;</span><span style="color:#24292EFF;">))</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  notifications</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineAsyncComponent</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/components/dashboard/Notifications&#39;</span><span style="color:#24292EFF;">))</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">currentComponent</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;stats&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><p><strong>5. 全局组件配置</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- components/global/Toast.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-if</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">show</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">toast</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">show</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">showToast</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">msg</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">msg</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">show</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">show</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">3000</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 提供方法供全局组件使用</span></span>
<span class="line"><span style="color:#88C0D0;">provide</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">toast</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">showToast</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- components/global/Toast.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-if</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">show</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;toast&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    {{ message }}</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">show</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">false</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">message</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">showToast</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> (msg) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">message</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> msg</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">show</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">show</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">false</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">3000</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 提供方法供全局组件使用</span></span>
<span class="line"><span style="color:#6F42C1;">provide</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;toast&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> showToast)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p><code>layouts/</code> 是Nuxt3主要目录之一,存放的是项目所有的布局页面<br> default.vue是默认页面，跟pages下面的index.vue一样，是必须的</p></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Header</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Toast</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Footer</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">Header</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">Toast</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">Footer</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- 任意组件中使用 --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">$toast</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useNuxtApp</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">saveData</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">try</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">api</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">save</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 执行components/global/Toast.vue组件注册的方法</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">$toast</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">保存成功！</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">$toast</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">保存失败：</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">+</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- 任意组件中使用 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">$toast</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useNuxtApp</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">saveData</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">try</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">api</span><span style="color:#6F42C1;">.save</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 执行components/global/Toast.vue组件注册的方法</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">$toast</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;保存成功！&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  } </span><span style="color:#D32F2F;">catch</span><span style="color:#24292EFF;"> (error) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">$toast</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;保存失败：&#39;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">+</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.message)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 组件命名冲突问题</strong></p><p>当多个组件同名时，Nuxt 会按以下优先级处理：</p><blockquote><ul><li>1: 具体路径的组件（如 <code>base/Button.vue</code>）</li><li>2: 全局组件（如 <code>Button.vue</code>）</li></ul></blockquote><p><strong>解决方案：</strong></p><blockquote><ul><li>使用目录结构避免同名</li><li>使用 prefix 配置添加前缀</li><li>明确指定路径, 在<mark>nuxt.config.ts</mark> 中配置：</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">components</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/base/Button.vue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">prefix</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Base</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">},</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/ui/Button.vue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">prefix</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Ui</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ]</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  components</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">    { path</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/components/base/Button.vue&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> prefix</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;Base&#39;</span><span style="color:#24292EFF;"> }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    { path</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;~/components/ui/Button.vue&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> prefix</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;Ui&#39;</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#24292EFF;">  ]</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>2. 自动导入的组件找不到</strong></p><p><strong>常见原因：</strong></p><blockquote><ul><li>文件不在 <code>components</code> 目录</li><li>文件名包含特殊字符（应使用 <code>kebab-case</code> 或 <code>PascalCase</code>）</li><li>Nuxt 服务未重启（开发时修改配置后需要重启）</li></ul></blockquote><p><strong>检查方法：</strong></p><blockquote><ul><li>列出所有自动导入的组件，可以检查出哪些组件并没有导入成功</li></ul></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 临时添加 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-for</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">c</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">in</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">components</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">c</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 查看所有自动导入的组件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">components</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">keys</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">useNuxtApp</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">vueApp</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">_context</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">components</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 临时添加 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-for</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">c </span><span style="color:#D32F2F;">in</span><span style="color:#24292EFF;"> components</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;{{ c }}&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 查看所有自动导入的组件</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">components</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">Object</span><span style="color:#6F42C1;">.keys</span><span style="color:#24292EFF;">(</span><span style="color:#6F42C1;">useNuxtApp</span><span style="color:#24292EFF;">().</span><span style="color:#1976D2;">vueApp</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">_context</span><span style="color:#24292EFF;">.components)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><p><strong>3. 性能优化建议</strong></p><blockquote><ul><li><strong>大型组件：</strong> 使用动态导入，只有用的地方才导入，提高性能</li></ul></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">HeavyComponent</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineAsyncComponent</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/components/HeavyComponent.vue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    )</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">HeavyComponent</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineAsyncComponent</span><span style="color:#24292EFF;">(</span></span>
<span class="line"><span style="color:#24292EFF;">      () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/components/HeavyComponent.vue&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">    )</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><ul><li><strong>按需加载：</strong> 对于不常用的组件，使用动态导入而非自动导入，减少项目体积</li><li><strong>组件分割：</strong> 将大组件拆分为小组件</li></ul></blockquote><hr><p><strong>4. 与插件(plugins)中的组件注册区别</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>components 目录</strong></th><th><strong>插件注册</strong></th></tr></thead><tbody><tr><td>自动导入</td><td>✓</td><td>✗ (需要手动注册)</td></tr><tr><td>代码分割</td><td>✓ (默认)</td><td>✗ (除非手动实现)</td></tr><tr><td>命名控制</td><td>通过文件名和目录</td><td>完全自定义</td></tr><tr><td>适合场景</td><td>普通组件</td><td>需要特殊处理的组件</td></tr><tr><td>全局注册</td><td>可配置</td><td>默认全局</td></tr></tbody></table><hr><p><strong>5. 与 composables 的配合</strong></p><p>组件可以配合 <code>composables</code> 实现逻辑复用：</p><blockquote><p><code>composables/</code> 是Nuxt3主要的目录之一,存放的是项目中的方法<br> 也是自动导入，组件可以直接使用</p></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useCounter.ts</span></span>
<span class="line"><span style="color:#616E88;">// 这里没有名字，那么文件名就是方法名</span></span>
<span class="line"><span style="color:#616E88;">// 如果有名字例如：export default addCount () =&gt; {}</span></span>
<span class="line"><span style="color:#616E88;">// 那么组件里使用的时候就是addCount</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">increment</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">++</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">increment</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useCounter.ts</span></span>
<span class="line"><span style="color:#C2C3C5;">// 这里没有名字，那么文件名就是方法名</span></span>
<span class="line"><span style="color:#C2C3C5;">// 如果有名字例如：export default addCount () =&gt; {}</span></span>
<span class="line"><span style="color:#C2C3C5;">// 那么组件里使用的时候就是addCount</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">increment</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;">.value</span><span style="color:#D32F2F;">++</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> { count</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> increment }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- components/Counter.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">increment</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">+</span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;span&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/span&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">increment</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useCounter</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- components/Counter.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">increment</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;+&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">span</span><span style="color:#24292EFF;">&gt;{{ count }}&lt;/</span><span style="color:#22863A;">span</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">count</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">increment</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useCounter</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><p><strong>6. 最佳实践</strong></p><ol><li><strong>命名规范：</strong></li></ol><blockquote><ul><li>文件名：PascalCase (如 UserCard.vue)</li><li>目录名：kebab-case (如 user-management)</li></ul></blockquote><ol start="2"><li><strong>组件设计：</strong></li></ol><blockquote><ul><li>保持组件单一职责</li><li>使用 props 和 emit 进行通信</li><li>为复杂组件提供清晰的文档注释</li></ul></blockquote><ol start="3"><li><strong>目录组织：</strong></li></ol><blockquote><ul><li>按功能或领域分组</li><li>避免过深的嵌套（不超过3层）</li><li>通用组件放在顶层或 base 目录</li></ul></blockquote><ol start="4"><li><strong>性能考虑：</strong></li></ol><blockquote><ul><li>大型列表使用虚拟滚动</li><li>复杂计算使用 computed 属性</li><li>避免不必要的全局组件</li></ul></blockquote><hr><p><strong>7. 常见错误解决方案</strong></p><ol><li><strong>组件未注册：</strong></li></ol><blockquote><ul><li>检查文件是否在 components 目录</li><li>检查文件名是否正确</li><li>重启 Nuxt 开发服务器</li></ul></blockquote><ol start="2"><li><strong>props 未生效：</strong></li></ol><blockquote><ul><li>确保使用 defineProps 声明 props</li><li>检查 prop 名称大小写（HTML 中是 kebab-case）</li></ul></blockquote><ol start="3"><li><strong>样式冲突：</strong></li></ol><blockquote><ul><li>使用 scoped 样式（只在当前组件生效，不影响其他）</li><li>或使用 CSS Modules：</li></ul></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">module</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">red</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">class</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">$style</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">button</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">按钮</span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">module</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.button</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">red</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">class</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#1976D2;">$style</span><span style="color:#24292EFF;">.button</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;按钮&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li><strong>服务端渲染问题：</strong></li></ol><blockquote><ul><li>避免在 setup 中使用 window/document</li><li>使用 onMounted 钩子处理浏览器API</li><li>使用 Nuxt 提供的 useFetch 替代 axios</li></ul></blockquote><hr><!--]--></div></div><hr><h3 id="composables" tabindex="-1">composables <a class="header-anchor" href="#composables" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 composables 目录？</strong></p><blockquote><ul><li><code>composables</code> 目录是存放 Vue 组合函数 (Composables) 的地方。这些是使用 Vue Composition API 封装的可复用逻辑 让你可以在组件之间共享状态和逻辑。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li><strong>逻辑复用：</strong> 封装可复用的业务逻辑</li><li><strong>代码组织：</strong> 将复杂逻辑从组件中抽离</li><li><strong>状态管理：</strong> 创建可共享的响应式状态</li><li><strong>SSR 支持：</strong> 自动处理服务端和客户端差异</li><li><strong>自动导入：</strong> 无需手动导入即可使用</li></ul></blockquote><hr><p><strong>3. 核心特点</strong></p><blockquote><ul><li><strong>自动扫描：</strong> 目录下的文件自动导入</li><li><strong>命名规范：</strong> 文件名决定函数名</li><li><strong>SSR 友好：</strong> 自动处理服务端渲染</li><li><strong>类型支持：</strong> 完整的 TypeScript 支持</li><li><strong>代码分割：</strong> 按需加载逻辑</li></ul></blockquote><hr><p><strong>4. 目录结构建议&amp;命名规则：</strong></p><blockquote><p>当然在实际开发的项目中是由具体的项目而定，这里只是给个参考</p></blockquote><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">composables/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── useAuth.ts              # 认证相关逻辑</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── useApi.ts               # API请求封装</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── useCart.ts              # 购物车逻辑</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── utils/                  # 工具函数</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── useFormat.ts</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── useValidation.ts</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── features/               # 按功能划分</span></span>
<span class="line"><span style="color:#d8dee9ff;">      ├── useProduct.ts</span></span>
<span class="line"><span style="color:#d8dee9ff;">      └── useUser.ts</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">composables/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── useAuth.ts              # 认证相关逻辑</span></span>
<span class="line"><span style="color:#24292eff;">  ├── useApi.ts               # API请求封装</span></span>
<span class="line"><span style="color:#24292eff;">  ├── useCart.ts              # 购物车逻辑</span></span>
<span class="line"><span style="color:#24292eff;">  ├── utils/                  # 工具函数</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── useFormat.ts</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── useValidation.ts</span></span>
<span class="line"><span style="color:#24292eff;">  └── features/               # 按功能划分</span></span>
<span class="line"><span style="color:#24292eff;">      ├── useProduct.ts</span></span>
<span class="line"><span style="color:#24292eff;">      └── useUser.ts</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><table><thead><tr><th><strong>文件位置</strong></th><th><strong>可调用函数名</strong></th></tr></thead><tbody><tr><td><code>useCounter.ts</code></td><td><code>useCounter()</code></td></tr><tr><td><code>utils/useFormat.ts</code></td><td><code>useFormat()</code></td></tr><tr><td><code>features/product.ts</code></td><td><code>useProduct()</code></td></tr></tbody></table><hr><p><strong>6. 需要手动导入吗？</strong></p><p><strong>不需要！</strong> 这是 composables 目录最大的优势：</p><blockquote><ul><li>1: 在 composables 目录创建 .ts 文件</li><li>2: 在文件中定义并导出组合函数</li><li>3: 在组件中直接调用函数名使用</li><li>4: Nuxt3 会自动处理导入</li></ul></blockquote><hr><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 基础计数器示例</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useCounter.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">increment</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">++</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">decrement</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">--</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">reset</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">increment</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">decrement</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">reset</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useCounter.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> () {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">increment</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;">.value</span><span style="color:#D32F2F;">++</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">decrement</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;">.value</span><span style="color:#D32F2F;">--</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">reset</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    count</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    increment</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    decrement</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    reset</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- 在组件中使用 --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">increment</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useCounter</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#D8DEE9FF;">计数: </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">increment</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">增加</span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- 在组件中使用 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">count</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">increment</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useCounter</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;计数: {{ count }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">increment</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;增加&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><p><strong>2. API 请求封装</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useApi.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">fetchData</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">&gt;(</span><span style="color:#D8DEE9;">url</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">string</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">Promise</span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useFetch</span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">&gt;</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">url</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">new</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">as</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">T</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">fetchData</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useApi.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> () {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">fetchData</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> &lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">&gt;(url</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">string</span><span style="color:#24292EFF;">)</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">Promise</span><span style="color:#24292EFF;">&lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">&gt; </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">&lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">&gt;(url)</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.value) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">throw</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">new</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">Error</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">value</span><span style="color:#24292EFF;">.message)</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">as</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">T</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    fetchData</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">fetchData</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useApi</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">products</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">([])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">onMounted</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">products</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">fetchData</span><span style="color:#ECEFF4;">&lt;</span><span style="color:#D8DEE9FF;">Product[]</span><span style="color:#ECEFF4;">&gt;</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/products</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">fetchData</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useApi</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">products</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">([])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">onMounted</span><span style="color:#24292EFF;">(</span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">products</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">fetchData</span><span style="color:#24292EFF;">&lt;</span><span style="color:#6F42C1;">Product</span><span style="color:#24292EFF;">[]&gt;(</span><span style="color:#22863A;">&#39;/api/products&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><p><strong>3. 用户认证状态</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useAuth.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useState</span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">User</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">|</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">null</span><span style="color:#ECEFF4;">&gt;</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">user</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">null</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isLoggedIn</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">computed</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">!!</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">login</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">email</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">string</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">password</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">string</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/auth/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">method</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">POST</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">body</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">email</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">password</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">user</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">logout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/auth/logout</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">method</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">POST</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">null</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">isLoggedIn</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">login</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">logout</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useAuth.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292EFF;">&lt;</span><span style="color:#6F42C1;">User</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">|</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">null</span><span style="color:#24292EFF;">&gt;(</span><span style="color:#22863A;">&#39;user&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">null</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">isLoggedIn</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">computed</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">!!</span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.value)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">login</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> (email</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">string</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> password</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">string</span><span style="color:#24292EFF;">) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/auth/login&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      method</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;POST&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      body</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> { email</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> password }</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;">.value) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">value</span><span style="color:#24292EFF;">.user</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">throw</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.value</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">logout</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/auth/logout&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> { method</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;POST&#39;</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">null</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    user</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    isLoggedIn</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    login</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    logout</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isLoggedIn</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">login</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">email</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">password</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">handleLogin</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">try</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">login</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">email</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">password</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/dashboard</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">alert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">登录失败</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">user</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">isLoggedIn</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">login</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">email</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">password</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">handleLogin</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">try</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">login</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">email</span><span style="color:#24292EFF;">.value</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">password</span><span style="color:#24292EFF;">.value)</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/dashboard&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  } </span><span style="color:#D32F2F;">catch</span><span style="color:#24292EFF;"> (error) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">alert</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;登录失败&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><p><strong>4. 本地存储封装</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useLocalStorage.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">&gt;(</span><span style="color:#D8DEE9;">key</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">string</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">defaultValue</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">state</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#ECEFF4;">&lt;</span><span style="color:#8FBCBB;">T</span><span style="color:#ECEFF4;">&gt;</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">defaultValue</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 从 localStorage 读取初始值</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">client</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">stored</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">localStorage</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getItem</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">key</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">state</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">stored</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">?</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parse</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">stored</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">defaultValue</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 监听变化并存储</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">watch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">state</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">newValue</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">client</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">localStorage</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setItem</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">key</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">newValue</span><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">},</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">deep</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">state</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useLocalStorage.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> &lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">&gt;(key</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">string</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> defaultValue</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">) {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">state</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">&lt;</span><span style="color:#6F42C1;">T</span><span style="color:#24292EFF;">&gt;(defaultValue)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 从 localStorage 读取初始值</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">process</span><span style="color:#24292EFF;">.client) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">stored</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">localStorage</span><span style="color:#6F42C1;">.getItem</span><span style="color:#24292EFF;">(key)</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">state</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> stored </span><span style="color:#D32F2F;">?</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">JSON</span><span style="color:#6F42C1;">.parse</span><span style="color:#24292EFF;">(stored) </span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> defaultValue</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 监听变化并存储</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">watch</span><span style="color:#24292EFF;">(state</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> (newValue) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">process</span><span style="color:#24292EFF;">.client) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#1976D2;">localStorage</span><span style="color:#6F42C1;">.setItem</span><span style="color:#24292EFF;">(key</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">JSON</span><span style="color:#6F42C1;">.stringify</span><span style="color:#24292EFF;">(newValue))</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> { deep</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> state</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;">// 使用示例</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">darkMode</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useLocalStorage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">dark-mode</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">toggleDarkMode</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">darkMode</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">darkMode</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">// 使用示例</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">darkMode</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useLocalStorage</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;dark-mode&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">false</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">toggleDarkMode</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">darkMode</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">darkMode</span><span style="color:#24292EFF;">.value</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 命名冲突问题</strong></p><p>当多个 composable 同名时，Nuxt 会按以下优先级处理：</p><blockquote><ul><li>1: 具体路径的函数（如 features/useProduct.ts）</li><li>2: 顶层的函数（如 useProduct.ts）</li></ul></blockquote><p><strong>解决方案：</strong></p><blockquote><ul><li>使用目录结构避免同名</li><li>使用更具体的函数名</li><li>使用命名导出, 这样的好处是不用创建太多的文件，按照项目而定</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/product.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useProductSearch</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">/* ... */</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useProductDetail</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">/* ... */</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 组件中使用</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">search</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useProductSearch</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/product.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useProductSearch</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> { </span><span style="color:#C2C3C5;">/* ... */</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useProductDetail</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> { </span><span style="color:#C2C3C5;">/* ... */</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 组件中使用</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">search</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useProductSearch</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>2. 自动导入不工作</strong></p><p><strong>常见原因：</strong></p><blockquote><ul><li>文件不在 composables 目录</li><li>没有默认导出</li><li>文件名包含特殊字符（应使用 camelCase）</li><li>Nuxt 服务未重启</li></ul></blockquote><p><strong>检查方法：</strong></p><blockquote><ul><li>列出所有自动导入的函数，可以检查出哪些函数并没有导入成功</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 打印所有自动导入的函数</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">keys</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">useNuxtApp</span><span style="color:#D8DEE9FF;">()))</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 打印所有自动导入的函数</span></span>
<span class="line"><span style="color:#1976D2;">console</span><span style="color:#6F42C1;">.log</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">Object</span><span style="color:#6F42C1;">.keys</span><span style="color:#24292EFF;">(</span><span style="color:#6F42C1;">useNuxtApp</span><span style="color:#24292EFF;">()))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><p><strong>3. 服务端渲染 (SSR) 注意事项</strong></p><blockquote><ul><li>1: <strong>浏览器 API：</strong> 使用前检查 <code>process.client</code></li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">client</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 使用 window, document 等</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">process</span><span style="color:#24292EFF;">.client) {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 使用 window, document 等</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><ul><li>2: <strong>状态共享：</strong> 使用 <code>useState</code> 代替 <code>ref</code> 用于跨请求状态</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误：在 SSR 中会共享</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 正确：每个请求独立状态</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useState</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">count</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误：在 SSR 中会共享</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 正确：每个请求独立状态</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">count</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;count&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><ul><li>3: <strong>异步数据：</strong> 使用 <code>useAsyncData</code> 处理异步操作</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAsyncData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">products</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">$fetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/products</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAsyncData</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;products&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">$fetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/products&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><p><strong>4. 与 Vue 的 composables 区别</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>Nuxt composables</strong></th><th><strong>Vue composables</strong></th></tr></thead><tbody><tr><td>自动导入</td><td>✓</td><td>✗ (需手动导入)</td></tr><tr><td>SSR 支持</td><td>✓ (自动处理)</td><td>✗ (需手动实现)</td></tr><tr><td>状态共享</td><td>通过 useState</td><td>需自行实现</td></tr><tr><td>路由集成</td><td>通过 useRouter</td><td>需手动获取</td></tr><tr><td>适合场景</td><td>Nuxt 项目</td><td>通用 Vue 项目</td></tr></tbody></table><hr><p><strong>5. 性能优化</strong></p><blockquote><ul><li>1: <strong>按需加载：</strong> 对于大型 composable，使用动态导入</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAsyncData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">heavy</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/composables/useHeavyLogic</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">m</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">m</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">default</span><span style="color:#D8DEE9FF;">())</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAsyncData</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;heavy&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/composables/useHeavyLogic&#39;</span><span style="color:#24292EFF;">)</span><span style="color:#6F42C1;">.then</span><span style="color:#24292EFF;">(m </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">m</span><span style="color:#6F42C1;">.default</span><span style="color:#24292EFF;">())</span></span>
<span class="line"><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><ul><li>2: <strong>计算属性缓存：</strong> 使用 <code>computed</code> 避免重复计算</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">total</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">computed</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">items</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">reduce</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">sum</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">item</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">sum</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">+</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">item</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">price</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span></span>
<span class="line"><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">total</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">computed</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">items</span><span style="color:#6F42C1;">.</span><span style="color:#1976D2;">value</span><span style="color:#6F42C1;">.reduce</span><span style="color:#24292EFF;">((sum</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> item) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> sum </span><span style="color:#D32F2F;">+</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">item</span><span style="color:#24292EFF;">.price</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span></span>
<span class="line"><span style="color:#24292EFF;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><ul><li>3: <strong>防抖节流：</strong> 高频操作使用防抖</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">debounce</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">from</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">lodash-es</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">search</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">debounce</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">query</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 搜索逻辑</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">300</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;"> { debounce } </span><span style="color:#D32F2F;">from</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;lodash-es&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">search</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">debounce</span><span style="color:#24292EFF;">((query) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 搜索逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">}</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">300</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>7. 最佳实践</strong></p><p>1.<strong>命名规范：</strong></p><blockquote><ul><li>文件名：camelCase（如 <code>useCounter.ts</code>）</li><li>函数名：useXxx（如 <code>useCounter()</code>）</li></ul></blockquote><p>2.<strong>单一职责：</strong></p><blockquote><ul><li>每个 composable 只关注一个功能</li><li>避免创建&quot;上帝函数&quot;</li></ul></blockquote><p>3.<strong>参数设计：</strong></p><blockquote><ul><li>使用可选参数提供灵活性</li><li>使用对象参数便于扩展</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">options</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">delay</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">300</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">})</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 具体逻辑</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> (options </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> { delay</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">300</span><span style="color:#24292EFF;"> }) {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 具体逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>4.<strong>返回值：</strong></p><blockquote><ul><li>返回 ref 和计算属性</li><li>返回方法供外部调用</li><li>使用 TypeScript 定义返回类型</li></ul></blockquote><p>5.<strong>错误处理：</strong></p><blockquote><ul><li>抛出错误而非静默失败</li><li>提供错误状态</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">execute</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAsyncData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#616E88;">/* 具体逻辑 */</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">error</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">execute</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAsyncData</span><span style="color:#24292EFF;">(</span><span style="color:#C2C3C5;">/* 具体逻辑 */</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><hr><p><strong>8. 常见问题解决方案</strong></p><p>1.<strong>函数未定义：</strong></p><blockquote><ul><li>检查文件是否在 composables 目录</li><li>确保使用默认导出</li><li>重启 Nuxt 开发服务器</li></ul></blockquote><p>2.<strong>响应式丢失：</strong></p><blockquote><ul><li>使用 <code>ref</code> 或 <code>reactive</code> 包装原始值</li><li>使用 <code>toRefs</code> 解构响应式对象：</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">state</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">reactive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">count</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">...</span><span style="color:#88C0D0;">toRefs</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">state</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">state</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292EFF;">({ count</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> { </span><span style="color:#D32F2F;">...</span><span style="color:#6F42C1;">toRefs</span><span style="color:#24292EFF;">(state) }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3.<strong>SSR 报错：</strong></p><blockquote><ul><li>检查是否在服务端访问浏览器 API</li><li>使用 <code>onMounted</code> 生命周期钩子</li><li>使用 Nuxt 提供的 <code>useFetch</code> 替代直接 fetch</li></ul></blockquote><p>4.<strong>状态不更新：</strong></p><blockquote><ul><li>确保使用 <code>.value</code> 访问 ref 值</li><li>检查是否意外修改了原始对象而非响应式对象</li><li>使用 <code>watch</code> 或 <code>watchEffect</code> 监听变化</li></ul></blockquote><hr><!--]--></div></div><hr><h3 id="layouts" tabindex="-1">layouts <a class="header-anchor" href="#layouts" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 layouts 目录？</strong></p><blockquote><ul><li><code>layouts</code> 目录是存放布局组件的地方。布局是 Nuxt3 中用于定义页面整体结构的组件，它们包装页面内容并提供可复用的 UI 结构（如页眉、页脚、导航栏等）。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li><strong>页面结构复用</strong>：定义公共页面框架</li><li><strong>嵌套布局</strong>：创建多层布局结构</li><li><strong>上下文感知</strong>：访问路由信息和全局状态</li><li><strong>页面包装</strong>：自动包装所有匹配的页面</li><li><strong>自定义错误处理</strong>：提供全局错误页面</li></ul></blockquote><hr><p><strong>3. 核心特点</strong></p><blockquote><ul><li><strong>约定优先</strong>：文件名即布局名</li><li><strong>自动注册</strong>：无需手动导入</li><li><strong>动态切换</strong>：页面可指定使用不同布局</li><li><strong>错误处理</strong>：内置错误页面布局</li><li><strong>嵌套支持</strong>：布局可以嵌套使用</li></ul></blockquote><hr><p><strong>4. 目录结构建议&amp;命名规则：</strong></p><blockquote><p>当然在实际开发的项目中是由具体的项目而定，这里只是给个参考</p></blockquote><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">layouts/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── default.vue      # 默认布局（必选）</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── admin.vue        # 后台管理布局</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── auth.vue         # 认证页面布局</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── error.vue        # 错误页面布局（自定义）</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── nested/          # 嵌套布局</span></span>
<span class="line"><span style="color:#d8dee9ff;">      ├── sidebar.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">      └── dashboard.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">layouts/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── default.vue      # 默认布局（必选）</span></span>
<span class="line"><span style="color:#24292eff;">  ├── admin.vue        # 后台管理布局</span></span>
<span class="line"><span style="color:#24292eff;">  ├── auth.vue         # 认证页面布局</span></span>
<span class="line"><span style="color:#24292eff;">  ├── error.vue        # 错误页面布局（自定义）</span></span>
<span class="line"><span style="color:#24292eff;">  └── nested/          # 嵌套布局</span></span>
<span class="line"><span style="color:#24292eff;">      ├── sidebar.vue</span></span>
<span class="line"><span style="color:#24292eff;">      └── dashboard.vue</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><table><thead><tr><th><strong>文件位置</strong></th><th><strong>布局名</strong></th><th><strong>使用方式</strong></th></tr></thead><tbody><tr><td><code>default.vue</code></td><td><code>default</code></td><td>默认布局（未指定时使用）</td></tr><tr><td><code>admin.vue</code></td><td><code>admin</code></td><td>在页面中指定 <code>layout: &#39;admin&#39;</code></td></tr><tr><td><code>error.vue</code></td><td><code>error</code></td><td>自动用于错误页面</td></tr></tbody></table><hr><p><strong>6. 布局组件结构：</strong></p><p>每个布局文件必须包含：</p><blockquote><ul><li>1: <code>&lt;slot /&gt;</code>：用于插入页面内容</li><li>2: 可选的公共 UI 元素（页眉、页脚等）</li><li>3: 全局逻辑（如用户认证检查）</li></ul></blockquote><hr><p><strong>7. 配置相关：</strong></p><p>在 <mark>nuxt.config.ts</mark> 中可以设置默认布局：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 设置默认布局（可选）</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">app</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">default</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 设置默认布局（可选）</span></span>
<span class="line"><span style="color:#24292EFF;">  app</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;default&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 基础布局示例</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">layout-container</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;header</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">header</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;nav&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">首页</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/about</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">关于</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/nav&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/header&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;main</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">content</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">&lt;!-- 页面内容将渲染在这里 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/main&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;footer</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">footer</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#ECEFF4;">&amp;</span><span style="color:#EBCB8B;">copy</span><span style="color:#ECEFF4;">;</span><span style="color:#D8DEE9FF;"> 2023 我的网站</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/footer&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">scoped</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">layout-container</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">display</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">flex;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">flex-direction</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">column;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">min-height</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">100</span><span style="color:#81A1C1;">vh;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">header</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">footer</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">background</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">f3f4f6</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">content</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">flex</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;layout-container&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">header</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;header&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">nav</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/&quot;</span><span style="color:#24292EFF;">&gt;首页&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/about&quot;</span><span style="color:#24292EFF;">&gt;关于&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">nav</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">header</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">main</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;content&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt; </span><span style="color:#C2C3C5;">&lt;!-- 页面内容将渲染在这里 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">main</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">footer</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;footer&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;&amp;copy; 2023 我的网站&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">footer</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">.layout-container</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">display</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">flex</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">flex-direction</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">column</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">min-height</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">100</span><span style="color:#D32F2F;">vh</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.header</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">.footer</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">background</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">#f3f4f6</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.content</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">flex</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">2</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><hr><p><strong>2. 后台管理布局</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">admin-layout</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;aside</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sidebar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;h2&gt;</span><span style="color:#D8DEE9FF;">管理后台</span><span style="color:#81A1C1;">&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;nav&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/admin/dashboard</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">仪表盘</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/admin/users</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">用户管理</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/admin/settings</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">系统设置</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/nav&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/aside&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">main-content</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;header</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">admin-header</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">AdminToolbar</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/header&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">content-wrapper</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;">// 布局级别的逻辑</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">route</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRoute</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 非管理员重定向</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">showError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">您没有访问权限</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">scoped</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">admin-layout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">display</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">flex;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">min-height</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">100</span><span style="color:#81A1C1;">vh;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">sidebar</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">width</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">250</span><span style="color:#81A1C1;">px;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">background</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">1f2937</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">color</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">white;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">main-content</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">flex</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">display</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">flex;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">flex-direction</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">column;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">admin-header</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">background</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">fff</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">border-bottom</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">px</span><span style="color:#88C0D0;"> </span><span style="color:#81A1C1;">solid</span><span style="color:#88C0D0;"> </span><span style="color:#ECEFF4;">#</span><span style="color:#B48EAD;">e5e7eb</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">content-wrapper</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">flex</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;admin-layout&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;sidebar&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;管理后台&lt;/</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">nav</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/admin/dashboard&quot;</span><span style="color:#24292EFF;">&gt;仪表盘&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/admin/users&quot;</span><span style="color:#24292EFF;">&gt;用户管理&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/admin/settings&quot;</span><span style="color:#24292EFF;">&gt;系统设置&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">nav</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;main-content&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">header</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;admin-header&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">AdminToolbar</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">header</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;content-wrapper&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">// 布局级别的逻辑</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRoute</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">isAdmin</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 非管理员重定向</span></span>
<span class="line"><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">isAdmin</span><span style="color:#24292EFF;">.value) {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">showError</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;您没有访问权限&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">.admin-layout</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">display</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">flex</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">min-height</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">100</span><span style="color:#D32F2F;">vh</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.sidebar</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">width</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">250</span><span style="color:#D32F2F;">px</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">background</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">#1f2937</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">color</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">white</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.main-content</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">flex</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">display</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">flex</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">flex-direction</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">column</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.admin-header</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">background</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">#fff</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">border-bottom</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#D32F2F;">px</span><span style="color:#1976D2;"> solid #e5e7eb</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.content-wrapper</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">2</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">flex</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">1</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><hr><p><strong>3. 在页面中使用布局</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/index.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#D8DEE9FF;">首页内容</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 使用默认布局 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/index.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;首页内容&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 使用默认布局 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/admin/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#D8DEE9FF;">仪表盘</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#616E88;">&lt;!-- 管理后台内容 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 指定使用 admin 布局</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/admin/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;仪表盘&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">&lt;!-- 管理后台内容 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 指定使用 admin 布局</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">      layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><ul><li>在 Nuxt3 中，布局并不需要额外的 <code>&lt;nuxt-layout&gt;&lt;/nuxt-layout&gt;</code> 包裹组件，因为布局本身是通过文件系统和组件自动关联的。</li><li>Nuxt3 会自动根据页面中设置的 layout 属性匹配到相应的布局文件，并渲染页面内容。如果没有指定 <code>layout</code>，则会默认使用 <code>layouts/default.vue。</code>无须手动在页面中引入 <code>&lt;nuxt-layout&gt;</code> 组件，Nuxt3 会自动处理布局的渲染。</li><li>在页面中只需通过 <code>definePageMeta</code> 指定布局名，Nuxt3 会自动应用相应的布局组件。无需额外的 <code>&lt;nuxt-layout&gt;</code> 包裹。</li></ul></blockquote><hr><p><strong>4. 错误页面布局</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/error.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">error-layout</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">error-content</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;h1</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-if</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">statusCode</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">404</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">页面未找到</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;h1</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-else</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">发生错误</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">||</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">抱歉，发生了意外错误</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">handleError</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">返回首页</span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">props</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineProps</span><span style="color:#D8DEE9FF;">([</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">error</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">handleError</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">clearError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">redirect</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">scoped</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">error-layout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">display</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">flex;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">justify-content</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">center;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">align-items</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">center;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">height</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">100</span><span style="color:#81A1C1;">vh;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">text-align</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">center;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">error-content</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">max-width</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">500</span><span style="color:#81A1C1;">px;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">padding</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#81A1C1;">rem;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/error.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;error-layout&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;error-content&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-if</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.statusCode </span><span style="color:#D32F2F;">===</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">404</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;页面未找到&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-else</span><span style="color:#24292EFF;">&gt;发生错误&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;{{ </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.message </span><span style="color:#D32F2F;">||</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;抱歉，发生了意外错误&#39;</span><span style="color:#24292EFF;"> }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">handleError</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;返回首页&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">props</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineProps</span><span style="color:#24292EFF;">([</span><span style="color:#22863A;">&#39;error&#39;</span><span style="color:#24292EFF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">handleError</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">clearError</span><span style="color:#24292EFF;">({ redirect</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/&#39;</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">.error-layout</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">display</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">flex</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">justify-content</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">center</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">align-items</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">center</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">height</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">100</span><span style="color:#D32F2F;">vh</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">text-align</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">center</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.error-content</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">max-width</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">500</span><span style="color:#D32F2F;">px</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">padding</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">2</span><span style="color:#D32F2F;">rem</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><hr><p><strong>5. 嵌套布局</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/nested/sidebar.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sidebar-layout</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;aside</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sidebar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">name</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sidebar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/aside&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;main</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">main-content</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/main&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/nested/sidebar.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;sidebar-layout&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;sidebar&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;sidebar&quot;</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">main</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;main-content&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">main</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">dashboard-layout</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">DashboardHeader</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">SidebarLayout</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;template</span><span style="color:#D8DEE9FF;"> #</span><span style="color:#8FBCBB;">sidebar</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">DashboardNav</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">SidebarLayout</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">DashboardFooter</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;dashboard-layout&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">DashboardHeader</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">SidebarLayout</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;"> #</span><span style="color:#6F42C1;">sidebar</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">        &lt;</span><span style="color:#1976D2;">DashboardNav</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#1976D2;">SidebarLayout</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">DashboardFooter</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- pages/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">dashboard</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- pages/dashboard.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;dashboard&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 布局选择优先级</strong></p><p>当页面指定布局时，Nuxt3 按以下顺序查找：</p><blockquote><ul><li>1: 页面中定义的 <code>definePageMeta({ layout: &#39;xxx&#39; })</code></li><li>2: <mark>nuxt.config.ts</mark> 中的默认布局设置</li><li>3: 默认的 <code>layouts/default.vue</code></li></ul></blockquote><hr><p><strong>2. 禁用布局</strong></p><p>如果某个页面不需要布局：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">      layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">false</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>3. 动态布局切换</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">route</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRoute</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">layout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">default</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 根据路由动态设置布局</span></span>
<span class="line"><span style="color:#88C0D0;">watch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">route</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">startsWith</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/admin</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">layout</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">layout</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">default</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// 动态设置布局</span></span>
<span class="line"><span style="color:#88C0D0;">setPageLayout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">layout</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRoute</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;default&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 根据路由动态设置布局</span></span>
<span class="line"><span style="color:#6F42C1;">watch</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;">.path</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> (path) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">path</span><span style="color:#6F42C1;">.startsWith</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/admin&#39;</span><span style="color:#24292EFF;">)) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  } </span><span style="color:#D32F2F;">else</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;default&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C2C3C5;">// 动态设置布局</span></span>
<span class="line"><span style="color:#6F42C1;">setPageLayout</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;">.value)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><p><strong>4. 布局与中间件配合</strong></p><p>布局中可以集成路由中间件：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin-auth</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin-auth&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p><code>middleware/</code>是Nuxt3主要的目录之一，存放中间件 多数用于跳转路由(就也就是页面)前做，比如token是否存在，是否过期检查 然后跳转到成功或者错误后的路由(页面), 比如token过期跳转到登录页面</p></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// middleware/admin-auth.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// middleware/admin-auth.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">isAdmin</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">isAdmin</span><span style="color:#24292EFF;">.value) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/login&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><p><strong>5. 最佳实践</strong></p><p>1.<strong>布局设计：</strong></p><blockquote><ul><li>保持布局专注于结构而非内容</li><li>使用具名插槽提供灵活性</li><li>避免在布局中包含业务逻辑</li></ul></blockquote><p>2.<strong>性能优化：</strong></p><blockquote><ul><li>大型布局使用异步组件</li><li>公共组件在布局中只加载一次</li><li>使用 v-if 条件渲染不总是需要的部分</li></ul></blockquote><p>3.<strong>响应式设计：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">class</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">mobile-layout</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isMobile</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isMobile</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useMediaQuery</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">(max-width: 768px)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">class</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">{ </span><span style="color:#22863A;">&#39;mobile-layout&#39;</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> isMobile }</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">isMobile</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useMediaQuery</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;(max-width: 768px)&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>4.<strong>错误处理：</strong></p><blockquote><ul><li>自定义 <code>error.vue</code> 提供友好错误提示</li><li>在布局中处理全局错误</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#88C0D0;">onErrorCaptured</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">布局级错误:</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 阻止错误继续向上传播</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#6F42C1;">onErrorCaptured</span><span style="color:#24292EFF;">((err) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">console</span><span style="color:#6F42C1;">.error</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;布局级错误:&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> err)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">false</span><span style="color:#24292EFF;"> </span><span style="color:#C2C3C5;">// 阻止错误继续向上传播</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><p><strong>6. 常见问题解决方案</strong></p><p>1.<strong>布局未生效：</strong></p><blockquote><ul><li>确保文件名正确（如 <code>default.vue</code>）</li><li>检查布局中是否包含 <code>&lt;slot /&gt;</code></li><li>确认页面中正确设置了 <code>definePageMeta</code></li></ul></blockquote><p>2.<strong>布局重复渲染：</strong></p><blockquote><ul><li>避免在布局中使用 <code>&lt;NuxtPage&gt;</code> 组件</li><li>确保没有嵌套使用多个布局组件</li></ul></blockquote><p>3.<strong>样式冲突：</strong></p><blockquote><ul><li>使用布局级别的 CSS 作用域</li><li>添加布局专属类名：</li></ul></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#D8DEE9FF;">&lt;div class=&quot;admin-layout&quot;&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#616E88;">&lt;!-- 内容 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">&lt;/div&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;div class=&quot;admin-layout&quot;&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">&lt;!-- 内容 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/div&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3.<strong>服务端渲染问题：</strong></p><blockquote><ul><li>在布局中使用 <code>useHead</code> 管理元数据</li><li>避免在布局的 setup 中使用浏览器 API</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#88C0D0;">useHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">我的网站</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">meta</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">description</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">content</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">网站描述</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ]</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#6F42C1;">useHead</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  title</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;我的网站&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  meta</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">    { name</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;description&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> content</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;网站描述&#39;</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#24292EFF;">  ]</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>7. 高级用法</strong></p><p>1.<strong>布局过渡动画：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">Transition</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">name</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fade</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">mode</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">out-in</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">Transition</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">fade-enter-active</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">fade-leave-active</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">transition</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">opacity </span><span style="color:#B48EAD;">0.3</span><span style="color:#81A1C1;">s;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">fade-enter-from</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">fade-leave-to</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">opacity</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">Transition</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;fade&quot;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">mode</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;out-in&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#1976D2;">Transition</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.fade-enter-active</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.fade-leave-active</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">transition</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">opacity 0.3</span><span style="color:#D32F2F;">s</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.fade-enter-from</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.fade-leave-to</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">opacity</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>2.<strong>基于角色的布局：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">layout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">computed</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">?.</span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">user</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">guest</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">setPageLayout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">layout</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">computed</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">value</span><span style="color:#24292EFF;">?.isAdmin) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.value) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;user&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;guest&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">setPageLayout</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">layout</span><span style="color:#24292EFF;">.value)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>3.<strong>布局注入数据：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">provide</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">layoutData</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">version</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">1.0.0</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">year</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">new</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">Date</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getFullYear</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/default.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">provide</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;layoutData&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    version</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;1.0.0&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    year</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">new</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">Date</span><span style="color:#24292EFF;">()</span><span style="color:#6F42C1;">.getFullYear</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- 页面中使用 --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">layoutData</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">inject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">layoutData</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- 页面中使用 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">layoutData</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">inject</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;layoutData&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>4.<strong>布局级插件：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// plugins/layout-plugin.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtPlugin</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">nuxtApp</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">nuxtApp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">hook</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">page:start</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 布局切换前逻辑</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">nuxtApp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">hook</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">page:finish</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 布局切换后逻辑</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// plugins/layout-plugin.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtPlugin</span><span style="color:#24292EFF;">((nuxtApp) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">nuxtApp</span><span style="color:#6F42C1;">.hook</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;page:start&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 布局切换前逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">nuxtApp</span><span style="color:#6F42C1;">.hook</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;page:finish&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 布局切换后逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><p><strong>8. 布局与组合式函数</strong></p><p>在布局中使用 composables 实现复杂逻辑：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// composables/useLayout.js</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useLayout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useState</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">sidebarOpen</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">toggleSidebar</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">toggleSidebar</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// composables/useLayout.js</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useLayout</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">isSidebarOpen</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;sidebarOpen&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">toggleSidebar</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">isSidebarOpen</span><span style="color:#24292EFF;">.value </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">isSidebarOpen</span><span style="color:#24292EFF;">.value</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    isSidebarOpen</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    toggleSidebar</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">toggleSidebar</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useLayout</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">toggleSidebar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">?</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">收起</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">展开</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;aside</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">v-if</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">isSidebarOpen</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 侧边栏内容 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/aside&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- layouts/admin.vue --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">isSidebarOpen</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">toggleSidebar</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useLayout</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">toggleSidebar</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    {{ isSidebarOpen </span><span style="color:#D32F2F;">?</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;收起&#39;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;展开&#39;</span><span style="color:#24292EFF;"> }}</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">v-if</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">isSidebarOpen</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 侧边栏内容 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">aside</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><!--]--></div></div><hr><h3 id="middleware" tabindex="-1">middleware <a class="header-anchor" href="#middleware" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 middleware 目录？</strong></p><blockquote><ul><li><code>middleware</code> 目录用于存放路由中间件文件。这些文件在页面渲染前执行，可拦截路由、修改请求/响应、执行认证检查等操作。中间件在服务端和客户端均可运行。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li><strong>路由守卫</strong>：控制页面访问权限</li><li><strong>全局逻辑</strong>：执行跨页面共享的逻辑</li><li><strong>数据预处理</strong>：提前获取页面所需数据</li><li><strong>请求修改</strong>：修改请求头或响应头</li><li><strong>错误处理</strong>：统一处理路由错误</li></ul></blockquote><hr><p><strong>3. 常见使用场景</strong></p><blockquote><ul><li><strong>用户身份验证</strong></li><li><strong>权限控制</strong></li><li><strong>日志记录</strong></li><li><strong>A/B测试</strong></li><li><strong>地理定位检查</strong></li><li><strong>维护模式切换</strong></li></ul></blockquote><hr><p><strong>4. 目录结构建议</strong></p><blockquote><p>当然在实际开发的项目中是由具体的项目而定，这里只是给个参考</p></blockquote><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">middleware/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── auth.global.ts    # 全局中间件（自动运行）</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── admin.ts          # 管理员权限检查</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── guest.ts          # 访客限制</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── log.ts            # 访问日志记录</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── maintenance.ts    # 维护模式检查</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">middleware/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── auth.global.ts    # 全局中间件（自动运行）</span></span>
<span class="line"><span style="color:#24292eff;">  ├── admin.ts          # 管理员权限检查</span></span>
<span class="line"><span style="color:#24292eff;">  ├── guest.ts          # 访客限制</span></span>
<span class="line"><span style="color:#24292eff;">  ├── log.ts            # 访问日志记录</span></span>
<span class="line"><span style="color:#24292eff;">  └── maintenance.ts    # 维护模式检查</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>5. 需要引入才能使用吗？</strong></p><blockquote><ul><li><strong>全局中间件</strong>（<code>.global</code>后缀）自动应用于所有路由</li><li><strong>命名中间件</strong>需要在页面中通过 <code>definePageMeta</code> 显式调用</li></ul></blockquote><hr><p><strong>6. 与插件（plugins）的区别：</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>middleware</strong></th><th><strong>plugins</strong></th></tr></thead><tbody><tr><td>执行时机</td><td>路由导航前（客户端或服务端）</td><td>Nuxt应用初始化时（客户端和服务端）</td></tr><tr><td>使用场景</td><td>路由相关的逻辑</td><td>应用初始化、全局功能注入</td></tr><tr><td>访问上下文</td><td>访问路由对象 (to, from)</td><td>访问Nuxt应用实例</td></tr><tr><td>多次执行</td><td>每次路由变化</td><td>仅一次（或每次热更新）</td></tr></tbody></table><hr><p><strong>7. 配置相关：</strong></p><p>在 <mark>nuxt.config.ts</mark> 中可配置中间件行为：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">routeRules</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/admin/**</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">] </span><span style="color:#616E88;">// 路由级中间件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  routeRules</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#22863A;">&#39;/admin/**&#39;</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> { </span></span>
<span class="line"><span style="color:#24292EFF;">      middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span><span style="color:#24292EFF;">] </span><span style="color:#C2C3C5;">// 路由级中间件</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 全局身份验证中间件</strong></p><p><strong><code>/middleware/auth.global.ts</code></strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">isAuthenticated</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuthStore</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 重定向到登录页</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">isAuthenticated</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">&amp;&amp;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">startsWith</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/login?redirect=</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">+</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">fullPath</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 已登录时禁止访问登录页</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">isAuthenticated</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">&amp;&amp;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">path</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/dashboard</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">isAuthenticated</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuthStore</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 重定向到登录页</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#24292EFF;">isAuthenticated </span><span style="color:#D32F2F;">&amp;&amp;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">to</span><span style="color:#6F42C1;">.</span><span style="color:#1976D2;">path</span><span style="color:#6F42C1;">.startsWith</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/login&#39;</span><span style="color:#24292EFF;">)) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/login?redirect=&#39;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">+</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.fullPath)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 已登录时禁止访问登录页</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (isAuthenticated </span><span style="color:#D32F2F;">&amp;&amp;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.path </span><span style="color:#D32F2F;">===</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/login&#39;</span><span style="color:#24292EFF;">) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/dashboard&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><p><strong>2. 命名中间件（管理员检查）</strong></p><p><strong><code>/middleware/admin.ts</code></strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useUserStore</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 中止导航并显示错误</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">abortNavigation</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">statusCode</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">403</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Requires admin privileges</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useUserStore</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">user</span><span style="color:#24292EFF;">.isAdmin) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 中止导航并显示错误</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">abortNavigation</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">      statusCode</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">403</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      message</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;Requires admin privileges&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在页面中使用：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">] </span><span style="color:#616E88;">// 使用中间件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;admin&#39;</span><span style="color:#24292EFF;">] </span><span style="color:#C2C3C5;">// 使用中间件</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>3. 维护模式中间件</strong></p><p><strong><code>/middleware/maintenance.ts</code></strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">maintenanceMode</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRuntimeConfig</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">public</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">maintenanceMode</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 重定向到维护页面</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/maintenance</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">redirectCode</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">503</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">maintenanceMode</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRuntimeConfig</span><span style="color:#24292EFF;">().public</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (maintenanceMode) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 重定向到维护页面</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/maintenance&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> { redirectCode</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">503</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><p><strong>4. 异步数据预取</strong></p><p><strong><code>/middleware/data-prefetch.ts</code></strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">productId</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">id</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">productId</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 预取产品数据</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useProductStore</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fetchProduct</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">productId</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">as</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">string</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">(</span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> (to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">productId</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">params</span><span style="color:#24292EFF;">.id</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (productId) {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 预取产品数据</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useProductStore</span><span style="color:#24292EFF;">()</span><span style="color:#6F42C1;">.fetchProduct</span><span style="color:#24292EFF;">(productId </span><span style="color:#D32F2F;">as</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">string</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><p><strong>5. 多中间件组合使用</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">// 先验证登录</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;">   </span><span style="color:#616E88;">// 再验证管理员权限</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">log</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">      </span><span style="color:#616E88;">// 最后记录访问日志</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    ]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 先验证登录</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#22863A;">&#39;admin&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;">   </span><span style="color:#C2C3C5;">// 再验证管理员权限</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#22863A;">&#39;log&#39;</span><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 最后记录访问日志</span></span>
<span class="line"><span style="color:#24292EFF;">    ]</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 执行顺序规则</strong></p><blockquote><ul><li>1: 全局中间件（按文件名顺序）</li><li>2: 布局（layout）中定义的中间件</li><li>3: 页面中定义的中间件</li></ul></blockquote><hr><p><strong>2. 服务端 vs 客户端执行</strong></p><blockquote><ul><li><strong>首次访问</strong>：在服务端执行</li><li><strong>客户端导航</strong>：在客户端执行</li><li><strong>强制服务端执行</strong>：</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">server</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 仅服务端逻辑</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">(to </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">process</span><span style="color:#24292EFF;">.server) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 仅服务端逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>3. 动态添加中间件</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 在插件或组件中动态添加</span></span>
<span class="line"><span style="color:#88C0D0;">addRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">tracking</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">useTrackPageView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">path</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">global</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 在插件或组件中动态添加</span></span>
<span class="line"><span style="color:#6F42C1;">addRouteMiddleware</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;tracking&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> (to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">useTrackPageView</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.path)</span></span>
<span class="line"><span style="color:#24292EFF;">}</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> { global</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><p><strong>4. 错误处理最佳实践</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">try</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 业务逻辑</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 统一错误处理</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">showError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#D8DEE9;">statusCode</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">500</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Middleware error</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 或中止导航</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">abortNavigation</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">try</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 业务逻辑</span></span>
<span class="line"><span style="color:#24292EFF;">    } </span><span style="color:#D32F2F;">catch</span><span style="color:#24292EFF;"> (error) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 统一错误处理</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#6F42C1;">showError</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">        statusCode</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">500</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">        message</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;Middleware error&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">      })</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 或中止导航</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">abortNavigation</span><span style="color:#24292EFF;">(error)</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><p><strong>5. 中间件类型定义</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 增强类型安全</span></span>
<span class="line"><span style="color:#81A1C1;">interface</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">MiddlewareContext</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  to</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">RouteLocationNormalized</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  from</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">RouteLocationNormalized</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">next</span><span style="color:#81A1C1;">?:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">void</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">context</span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">MiddlewareContext</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 逻辑处理</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 增强类型安全</span></span>
<span class="line"><span style="color:#D32F2F;">interface</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">MiddlewareContext</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  to</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">RouteLocationNormalized</span></span>
<span class="line"><span style="color:#24292EFF;">  from</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">RouteLocationNormalized</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">next</span><span style="color:#D32F2F;">?:</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">void</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">((context</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">MiddlewareContext</span><span style="color:#24292EFF;">) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 逻辑处理</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><p><strong>6. 性能优化建议</strong></p><blockquote><ul><li>避免在中间件中执行重型同步操作</li><li>对数据预取使用 <code>lazy: true</code> 选项</li><li>使用 <code>watch: false</code> 防止重复执行：</li></ul></blockquote><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">path</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/dashboard</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">watch</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> { path</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/dashboard&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> watch</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">false</span><span style="color:#24292EFF;"> }]</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><p><strong>7. 性能优化建议</strong></p><p>1.<strong>命名规范：</strong></p><blockquote><ul><li>全局中间件：[name].global.ts</li><li>局部中间件：[name].ts</li></ul></blockquote><p>2.<strong>安全实践：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 防止敏感信息泄露</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">client</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">deleteHeaders</span><span style="color:#D8DEE9FF;">([</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">X-Secret-Token</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">])</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 防止敏感信息泄露</span></span>
<span class="line"><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">process</span><span style="color:#24292EFF;">.client) {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">deleteHeaders</span><span style="color:#24292EFF;">([</span><span style="color:#22863A;">&#39;X-Secret-Token&#39;</span><span style="color:#24292EFF;">])</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>3.<strong>中间件复用：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 创建可配置中间件</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">createAuthMiddleware</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">options</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 使用options配置</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 创建可配置中间件</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">createAuthMiddleware</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> (options) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 使用options配置</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>4.<strong>组合式函数集成：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 复用组合式逻辑</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtRouteMiddleware</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">validate</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAuth</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">validate</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 复用组合式逻辑</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtRouteMiddleware</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">validate</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAuth</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">validate</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>5.<strong>避免副作用：</strong></p><blockquote><ul><li>不要在中间件中直接修改组件状态</li><li>通过状态管理（Pinia）共享数据</li></ul></blockquote><hr><p><strong>8. 常见错误</strong></p><p>1.<strong>循环重定向：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误示例：未设置排除路径</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">isAuth</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误示例：未设置排除路径</span></span>
<span class="line"><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#24292EFF;">isAuth) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/login&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.<strong>服务端客户端不一致：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误：在服务端使用window</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">window</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">localStorage</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">token</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// ❌</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误：在服务端使用window</span></span>
<span class="line"><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">window</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">localStorage</span><span style="color:#24292EFF;">.token) </span><span style="color:#C2C3C5;">// ❌</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3.<strong>未处理异步：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误：未等待异步操作</span></span>
<span class="line"><span style="color:#88C0D0;">fetchData</span><span style="color:#D8DEE9FF;">() </span><span style="color:#616E88;">// ❌ 可能未完成就继续导航</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误：未等待异步操作</span></span>
<span class="line"><span style="color:#6F42C1;">fetchData</span><span style="color:#24292EFF;">() </span><span style="color:#C2C3C5;">// ❌ 可能未完成就继续导航</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>4.<strong>路径硬编码：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误</span></span>
<span class="line"><span style="color:#88C0D0;">navigateTo</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/en/login</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// ❌ 应使用i18n路径</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误</span></span>
<span class="line"><span style="color:#6F42C1;">navigateTo</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/en/login&#39;</span><span style="color:#24292EFF;">) </span><span style="color:#C2C3C5;">// ❌ 应使用i18n路径</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>5.<strong>中间件顺序错误：</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">log</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">] </span><span style="color:#616E88;">// ❌ 应先执行auth</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;log&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#24292EFF;">] </span><span style="color:#C2C3C5;">// ❌ 应先执行auth</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr><!--]--></div></div><hr><h3 id="pages" tabindex="-1">pages <a class="header-anchor" href="#pages" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 什么是 pages 目录？</strong></p><blockquote><ul><li><code>pages</code> 目录是 Nuxt3 的核心目录，用于存放应用的路由页面。该目录中的每个 Vue 文件都会自动映射为应用的一个路由，遵循基于文件系统的路由规则。</li></ul></blockquote><hr><p><strong>2. 有什么用？</strong></p><blockquote><ul><li><strong>自动路由生成</strong>：根据目录结构自动创建路由配置</li><li><strong>动态路由支持</strong>：通过方括号语法 <code>[param].vue</code> 创建动态路由</li><li><strong>嵌套路由</strong>：通过子目录和 <code>&lt;NuxtPage&gt;</code> 组件实现嵌套视图</li><li><strong>布局集成</strong>：支持页面级布局配置</li><li><strong>路由元数据</strong>：通过 <code>definePageMeta</code> 定义路由特定信息</li></ul></blockquote><hr><p><strong>3. 常见使用场景</strong></p><blockquote><ul><li><strong>页面组件（.vue 文件）</strong></li><li><strong>动态路由参数文件（如 <code>[id].vue</code>）</strong></li><li><strong>嵌套路由目录结构</strong></li><li><strong>错误页面（<code>error.vue</code>）</strong></li><li><strong>自定义 404 页面（<code>[...slug].vue）</code></strong></li></ul></blockquote><hr><p><strong>4. 目录结构建议</strong></p><blockquote><p>当然在实际开发的项目中是由具体的项目而定，这里只是给个参考</p></blockquote><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">ages/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── index.vue            # 首页路由：/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── about.vue            # /about</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── products/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── index.vue        # /products</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── [id].vue         # /products/:id</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── category/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │       └── [slug].vue   # /products/category/:slug</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── dashboard/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── index.vue        # /dashboard</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── settings.vue     # /dashboard/settings</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── blog/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── index.vue        # /blog</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── [...slug].vue    # /blog/* (捕获所有路由)</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── contact.vue          # /contact</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── error.vue            # 自定义错误页面</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">ages/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── index.vue            # 首页路由：/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── about.vue            # /about</span></span>
<span class="line"><span style="color:#24292eff;">  ├── products/</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── index.vue        # /products</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── [id].vue         # /products/:id</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── category/</span></span>
<span class="line"><span style="color:#24292eff;">  │       └── [slug].vue   # /products/category/:slug</span></span>
<span class="line"><span style="color:#24292eff;">  ├── dashboard/</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── index.vue        # /dashboard</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── settings.vue     # /dashboard/settings</span></span>
<span class="line"><span style="color:#24292eff;">  ├── blog/</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── index.vue        # /blog</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── [...slug].vue    # /blog/* (捕获所有路由)</span></span>
<span class="line"><span style="color:#24292eff;">  ├── contact.vue          # /contact</span></span>
<span class="line"><span style="color:#24292eff;">  └── error.vue            # 自定义错误页面</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><p><strong>5. 需要引入才能使用吗？</strong></p><blockquote><ul><li><strong>不需要</strong>。Nuxt 会自动扫描 <code>pages</code> 目录并生成路由配置。页面组件会自动注册为路由。</li></ul></blockquote><hr><p><strong>6. 与 layouts 目录的区别：</strong></p><table><thead><tr><th><strong>特性</strong></th><th><strong>pages 目录</strong></th><th><strong>layouts 目录</strong></th></tr></thead><tbody><tr><td>目的</td><td>定义路由页面内容</td><td>定义页面通用框架</td></tr><tr><td>路由影响</td><td>直接影响 URL 路径</td><td>不影响 URL，只影响渲染</td></tr><tr><td>嵌套</td><td>通过目录结构实现路由嵌套</td><td>通过 <code>&lt;slot&gt;</code> 实现内容嵌套</td></tr><tr><td>动态路由</td><td>支持动态参数</td><td>不支持动态参数</td></tr><tr><td>自动注册</td><td>自动生成路由</td><td>需在页面中指定使用</td></tr></tbody></table><hr><p><strong>7. 配置相关：</strong></p><p>在 <mark>nuxt.config.ts</mark> 中可配置页面行为：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">pages</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 启用基于文件的路由（默认）</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">routeRules</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/old-page</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">redirect</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/new-page</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 路由重定向</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  pages</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#C2C3C5;">// 启用基于文件的路由（默认）</span></span>
<span class="line"><span style="color:#24292EFF;">  routeRules</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#22863A;">&#39;/old-page&#39;</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> { redirect</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/new-page&#39;</span><span style="color:#24292EFF;"> } </span><span style="color:#C2C3C5;">// 路由重定向</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 基本页面创建</strong></p><p><strong><code>pages/index.vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#D8DEE9FF;">欢迎来到首页</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/about</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">关于我们</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;欢迎来到首页&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/about&quot;</span><span style="color:#24292EFF;">&gt;关于我们&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><p><strong>2. 动态路由参数</strong></p><p><strong><code>pages/products/[id].vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h2&gt;</span><span style="color:#D8DEE9FF;">产品详情: </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">product</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#D8DEE9FF;">ID: </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">$route</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">id</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">route</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRoute</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> data</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">product</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">/api/products/</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">route</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">id</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;产品详情: {{ </span><span style="color:#1976D2;">product</span><span style="color:#24292EFF;">.name }}&lt;/</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;ID: {{ </span><span style="color:#1976D2;">$route</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">params</span><span style="color:#24292EFF;">.id }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRoute</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { data: </span><span style="color:#1976D2;">product</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">`/api/products/</span><span style="color:#D32F2F;">${</span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">params</span><span style="color:#24292EFF;">.id</span><span style="color:#D32F2F;">}</span><span style="color:#22863A;">`</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><p><strong>3. 嵌套路由</strong></p><p><strong><code>pages/parent/index.vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#D8DEE9FF;">父页面</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#616E88;">&lt;!-- 子路由出口 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtPage</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;父页面&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">&lt;!-- 子路由出口 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">NuxtPage</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong><code>pages/parent/child.vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h2&gt;</span><span style="color:#D8DEE9FF;">子页面内容</span><span style="color:#81A1C1;">&lt;/h2&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;子页面内容&lt;/</span><span style="color:#22863A;">h2</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>4. 路由参数验证</strong></p><p><strong><code>pages/user/[id].vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">validate</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">async</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">route</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">      </span><span style="color:#616E88;">// 验证ID是否为数字</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">return</span><span style="color:#EBCB8B;"> </span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\d</span><span style="color:#81A1C1;">+$</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">test</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">route</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">id</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">validate</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">async</span><span style="color:#24292EFF;"> (route) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">// 验证ID是否为数字</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">return</span><span style="color:#22863A;"> /</span><span style="color:#D32F2F;">^</span><span style="color:#22863A;">\d</span><span style="color:#D32F2F;">+$</span><span style="color:#22863A;">/</span><span style="color:#6F42C1;">.test</span><span style="color:#24292EFF;">(</span><span style="color:#1976D2;">route</span><span style="color:#24292EFF;">.</span><span style="color:#1976D2;">params</span><span style="color:#24292EFF;">.id)</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><p><strong>5. 页面元数据配置</strong></p><p><strong><code>pages/about.vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">关于我们</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">custom-layout</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">keepalive</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 开启缓存</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    title</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;关于我们&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;custom-layout&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#24292EFF;">]</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    keepalive</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">true</span><span style="color:#24292EFF;"> </span><span style="color:#C2C3C5;">// 开启缓存</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><p><strong>6. 捕获所有路由（404页面）</strong></p><p><strong><code>pages/[...slug].vue</code></strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#D8DEE9FF;">页面不存在</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#D8DEE9FF;">请求的路径: </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">$route</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">slug</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">join</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">to</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">返回首页</span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLink</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">error</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;页面不存在&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;请求的路径: {{ </span><span style="color:#1976D2;">$route</span><span style="color:#6F42C1;">.</span><span style="color:#1976D2;">params</span><span style="color:#6F42C1;">.</span><span style="color:#1976D2;">slug</span><span style="color:#6F42C1;">.join</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/&#39;</span><span style="color:#24292EFF;">) }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">to</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;/&quot;</span><span style="color:#24292EFF;">&gt;返回首页&lt;/</span><span style="color:#1976D2;">NuxtLink</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;error&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><p><strong>1. 动态路由匹配规则</strong></p><blockquote><ul><li><code>[param].vue</code> → 单参数（/product/123）</li><li><code>[...slug].vue</code> → 捕获所有路由（/foo/bar/baz）</li><li><code>[[...slug]].vue</code> → 可选捕获（可匹配 / 或 /foo/bar）</li></ul></blockquote><hr><p><strong>2. 路由中间件使用</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">middleware</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">auth</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 命名中间件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">// 内联中间件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">userStore</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">isAdmin</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    ]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    middleware</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#22863A;">&#39;auth&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#C2C3C5;">// 命名中间件</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> (to) { </span><span style="color:#C2C3C5;">// 内联中间件</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#D32F2F;">!</span><span style="color:#1976D2;">userStore</span><span style="color:#24292EFF;">.isAdmin) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span></span>
<span class="line"><span style="color:#24292EFF;">    ]</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><hr><p><strong>3. 页面缓存配置</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">keepalive</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">exclude</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Modal</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">] </span><span style="color:#616E88;">// 排除特定组件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 手动控制缓存</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">$keepalive</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useNuxtApp</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">$keepalive</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">refresh</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">ProductPage</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    keepalive</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">      exclude</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;Modal&#39;</span><span style="color:#24292EFF;">] </span><span style="color:#C2C3C5;">// 排除特定组件</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 手动控制缓存</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">$keepalive</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useNuxtApp</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">$keepalive</span><span style="color:#6F42C1;">.refresh</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;ProductPage&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><p><strong>4. 错误页面处理</strong></p><p><strong><code>error.vue</code></strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">class</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">error-container</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;h1&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">statusCode</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;p&gt;</span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#81A1C1;">&lt;/p&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;button</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">@</span><span style="color:#8FBCBB;">click</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9;">clearError</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;">返回首页</span><span style="color:#81A1C1;">&lt;/button&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">props</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineProps</span><span style="color:#D8DEE9FF;">([</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">error</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">])</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">clearError</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">clearError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">redirect</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;error-container&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;{{ </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.statusCode }}&lt;/</span><span style="color:#22863A;">h1</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;{{ </span><span style="color:#1976D2;">error</span><span style="color:#24292EFF;">.message }}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">@</span><span style="color:#6F42C1;">click</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">clearError</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">&gt;返回首页&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">props</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineProps</span><span style="color:#24292EFF;">([</span><span style="color:#22863A;">&#39;error&#39;</span><span style="color:#24292EFF;">])</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">clearError</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">clearError</span><span style="color:#24292EFF;">({ redirect</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/&#39;</span><span style="color:#24292EFF;"> })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><p><strong>5. 布局系统集成</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 指定使用的布局</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#616E88;">&lt;!-- 页面内容 --&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 指定使用的布局</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">      layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#C2C3C5;">&lt;!-- 页面内容 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>6. 页面特殊钩子</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 服务端异步数据获取</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useAsyncData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">page-data</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">$fetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/page</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 路由切换前处理</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">onBeforeRouteLeave</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">from</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">formDirty</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">confirm</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">确定离开吗？</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 仅客户端执行的代码</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">onMounted</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">trackPageView</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 服务端异步数据获取</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useAsyncData</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;page-data&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">$fetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/page&#39;</span><span style="color:#24292EFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 路由切换前处理</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">onBeforeRouteLeave</span><span style="color:#24292EFF;">((to</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> from) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (formDirty) </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">confirm</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;确定离开吗？&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 仅客户端执行的代码</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">onMounted</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">trackPageView</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr><p><strong>7. 最佳实践</strong></p><p>1.<strong>命名规范</strong>：</p><blockquote><ul><li>文件：小写字母 + 连字符（user-profile.vue）</li><li>目录：复数形式（products/）</li></ul></blockquote><p>2.<strong>性能优化</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 懒加载组件</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">layout</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">import</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">~/layouts/dynamic-layout.vue</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 懒加载组件</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">layout</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> () </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">import</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;~/layouts/dynamic-layout.vue&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>3.<strong>API 集成</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#ECEFF4;">  </span><span style="color:#616E88;">// 并行请求优化</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">[</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">posts</span><span style="color:#ECEFF4;">]</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">Promise</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">all</span><span style="color:#D8DEE9FF;">([</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/user</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/posts</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ])</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">// 并行请求优化</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> [</span><span style="color:#1976D2;">user</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">posts</span><span style="color:#24292EFF;">] </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">Promise</span><span style="color:#6F42C1;">.all</span><span style="color:#24292EFF;">([</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/user&#39;</span><span style="color:#24292EFF;">)</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/posts&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">  ])</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>4.<strong>国际化路由</strong>：</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">pages/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── [lang]/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   ├── index.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  │   └── about.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">pages/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── [lang]/</span></span>
<span class="line"><span style="color:#24292eff;">  │   ├── index.vue</span></span>
<span class="line"><span style="color:#24292eff;">  │   └── about.vue</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>5.<strong>分组路由</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">group</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    group</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;admin&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><p><strong>8. 常见错误</strong></p><p>1.<strong>动态路由命名冲突</strong>：</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#d8dee9ff;">pages/</span></span>
<span class="line"><span style="color:#d8dee9ff;">  ├── [id].vue</span></span>
<span class="line"><span style="color:#d8dee9ff;">  └── index.vue    # ❌ 冲突：应改为 users/index.vue</span></span>
<span class="line"><span style="color:#d8dee9ff;"></span></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292eff;">pages/</span></span>
<span class="line"><span style="color:#24292eff;">  ├── [id].vue</span></span>
<span class="line"><span style="color:#24292eff;">  └── index.vue    # ❌ 冲突：应改为 users/index.vue</span></span>
<span class="line"><span style="color:#24292eff;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.<strong>无效的嵌套路由</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- 父页面忘记添加 &lt;NuxtPage&gt; --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;div&gt;</span><span style="color:#D8DEE9FF;">父页面内容</span><span style="color:#81A1C1;">&lt;/div&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#616E88;">&lt;!-- 缺少子路由出口 --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- 父页面忘记添加 &lt;NuxtPage&gt; --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;父页面内容&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#C2C3C5;">&lt;!-- 缺少子路由出口 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>3.<strong>路由参数未处理</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;">// 错误：未处理异步数据加载状态</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">await</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/api/data</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">{{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">&lt;!-- 可能为undefined --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#C2C3C5;">// 错误：未处理异步数据加载状态</span></span>
<span class="line"><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> { </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;"> } </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">await</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useFetch</span><span style="color:#24292EFF;">(</span><span style="color:#22863A;">&#39;/api/data&#39;</span><span style="color:#24292EFF;">)</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  {{ </span><span style="color:#1976D2;">data</span><span style="color:#24292EFF;">.name }} </span><span style="color:#C2C3C5;">&lt;!-- 可能为undefined --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>4.<strong>布局无限循环</strong>：</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">&lt;!-- 错误：布局内引用自身 --&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtLayout</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">name</span><span style="color:#D8DEE9FF;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">self-layout</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">&lt;slot</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;/</span><span style="color:#8FBCBB;">NuxtLayout</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">&lt;!-- 错误：布局内引用自身 --&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#1976D2;">NuxtLayout</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292EFF;">=</span><span style="color:#22863A;">&quot;self-layout&quot;</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">    &lt;</span><span style="color:#22863A;">slot</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;/</span><span style="color:#1976D2;">NuxtLayout</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>5.<strong>未处理404错误</strong>：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// 错误：缺少全局捕获路由</span></span>
<span class="line"><span style="color:#616E88;">// 应添加 pages/[...slug].vue</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// 错误：缺少全局捕获路由</span></span>
<span class="line"><span style="color:#C2C3C5;">// 应添加 pages/[...slug].vue</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><p><strong>高级技巧</strong></p><p>1.<strong>路由过渡效果</strong></p><p><strong><code>app.vue</code>：</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">&lt;</span><span style="color:#8FBCBB;">NuxtPage</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">:</span><span style="color:#8FBCBB;">transition</span><span style="color:#ECEFF4;">=</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    name</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">page</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    mode</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">out-in</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;"> /</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">&lt;style&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">page-enter-active</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">page-leave-active</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">transition</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">opacity </span><span style="color:#B48EAD;">0.3</span><span style="color:#81A1C1;">s;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">page-enter-from</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">.</span><span style="color:#8FBCBB;">page-leave-to</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">opacity</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/style&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  &lt;</span><span style="color:#1976D2;">NuxtPage</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">:</span><span style="color:#6F42C1;">transition</span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;">{</span></span>
<span class="line"><span style="color:#24292EFF;">    name</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;page&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">    mode</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;out-in&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span><span style="color:#24292EFF;">&quot;</span><span style="color:#24292EFF;"> /&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.page-enter-active</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.page-leave-active</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">transition</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">opacity 0.3</span><span style="color:#D32F2F;">s</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.page-enter-from</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">.page-leave-to</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">opacity</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;">;</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>2.<strong>编程式导航</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">router</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRouter</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">navigate</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">router</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">push</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">path</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/product/123</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">query</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">ref</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">home</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">},</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">hash</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">#section</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">router</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRouter</span><span style="color:#24292EFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">function</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">navigate</span><span style="color:#24292EFF;">() {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#1976D2;">router</span><span style="color:#6F42C1;">.push</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">      path</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/product/123&#39;</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      query</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> { ref</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;home&#39;</span><span style="color:#24292EFF;"> }</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">      hash</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;#section&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">    })</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>3.<strong>路由别名</strong></p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">&lt;script</span><span style="color:#D8DEE9FF;"> </span><span style="color:#8FBCBB;">setup</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">definePageMeta</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">alias</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/old-path</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">/v2/new-path</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#24292EFF;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#6F42C1;">definePageMeta</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">    alias</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> [</span><span style="color:#22863A;">&#39;/old-path&#39;</span><span style="color:#212121;">,</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;/v2/new-path&#39;</span><span style="color:#24292EFF;">]</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292EFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>4.<strong>页面滚动行为</strong></p><p><strong><code>nuxt.config.ts</code></strong>：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtConfig</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">app</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">scrollBehavior</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">hash</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span></span>
<span class="line"><span style="color:#D8DEE9FF;">          </span><span style="color:#D8DEE9;">el</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">hash</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">          </span><span style="color:#D8DEE9;">behavior</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">smooth</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">        </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">top</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtConfig</span><span style="color:#24292EFF;">({</span></span>
<span class="line"><span style="color:#24292EFF;">  app</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#6F42C1;">scrollBehavior</span><span style="color:#24292EFF;">(to) {</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">if</span><span style="color:#24292EFF;"> (</span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.hash) {</span></span>
<span class="line"><span style="color:#24292EFF;">        </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> { </span></span>
<span class="line"><span style="color:#24292EFF;">          el</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">to</span><span style="color:#24292EFF;">.hash</span><span style="color:#212121;">,</span></span>
<span class="line"><span style="color:#24292EFF;">          behavior</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#22863A;">&#39;smooth&#39;</span></span>
<span class="line"><span style="color:#24292EFF;">        }</span></span>
<span class="line"><span style="color:#24292EFF;">      }</span></span>
<span class="line"><span style="color:#24292EFF;">      </span><span style="color:#D32F2F;">return</span><span style="color:#24292EFF;"> { top</span><span style="color:#D32F2F;">:</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">0</span><span style="color:#24292EFF;"> }</span></span>
<span class="line"><span style="color:#24292EFF;">    }</span></span>
<span class="line"><span style="color:#24292EFF;">  }</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>5.<strong>路由守卫集成</strong></p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki vp-code-dark"><code><span class="line"><span style="color:#616E88;">// plugins/router.ts</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">default</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">defineNuxtPlugin</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">router</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">useRouter</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">router</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">beforeEach</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 全局前置守卫</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#D8DEE9;">router</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">afterEach</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// 全局后置守卫</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"><span style="color:#C2C3C5;">// plugins/router.ts</span></span>
<span class="line"><span style="color:#D32F2F;">export</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">default</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">defineNuxtPlugin</span><span style="color:#24292EFF;">(() </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#D32F2F;">const</span><span style="color:#24292EFF;"> </span><span style="color:#1976D2;">router</span><span style="color:#24292EFF;"> </span><span style="color:#D32F2F;">=</span><span style="color:#24292EFF;"> </span><span style="color:#6F42C1;">useRouter</span><span style="color:#24292EFF;">()</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">router</span><span style="color:#6F42C1;">.beforeEach</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 全局前置守卫</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">  </span></span>
<span class="line"><span style="color:#24292EFF;">  </span><span style="color:#1976D2;">router</span><span style="color:#6F42C1;">.afterEach</span><span style="color:#24292EFF;">((to) </span><span style="color:#D32F2F;">=&gt;</span><span style="color:#24292EFF;"> {</span></span>
<span class="line"><span style="color:#24292EFF;">    </span><span style="color:#C2C3C5;">// 全局后置守卫</span></span>
<span class="line"><span style="color:#24292EFF;">  })</span></span>
<span class="line"><span style="color:#24292EFF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><!--]--></div></div><hr><h3 id="plugins" tabindex="-1">plugins <a class="header-anchor" href="#plugins" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><hr><h3 id="utils" tabindex="-1">utils <a class="header-anchor" href="#utils" aria-hidden="true">#</a></h3><div class="custom-section border-l-4 border-blue-500 bg-blue-50" style="border-left-color:blue;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>理论阐述</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><div class="custom-section border-l-4 border-purple-500 bg-purple-50" style="border-left-color:purple;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>代码示例</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><div class="custom-section border-l-4 border-amber-500 bg-amber-50" style="border-left-color:amber;" data-v-dd1066b6><button class="toggle-btn" data-v-dd1066b6>展开</button><h4 class="section-title" data-v-dd1066b6>问题补充</h4><div class="content-wrapper" style="display:none;" data-v-dd1066b6><!--[--><!--]--></div></div><hr><h2 id="应用文件" tabindex="-1">应用文件 <a class="header-anchor" href="#应用文件" aria-hidden="true">#</a></h2><h3 id="appvue" tabindex="-1">appvue <a class="header-anchor" href="#appvue" aria-hidden="true">#</a></h3><hr><h3 id="appconfigts" tabindex="-1">appconfigts <a class="header-anchor" href="#appconfigts" aria-hidden="true">#</a></h3><hr><h3 id="errorvue" tabindex="-1">errorvue <a class="header-anchor" href="#errorvue" aria-hidden="true">#</a></h3><hr><h2 id="核心目录" tabindex="-1">核心目录 <a class="header-anchor" href="#核心目录" aria-hidden="true">#</a></h2><h3 id="nuxt" tabindex="-1">.nuxt <a class="header-anchor" href="#nuxt" aria-hidden="true">#</a></h3><hr><h3 id="output" tabindex="-1">.output <a class="header-anchor" href="#output" aria-hidden="true">#</a></h3><hr><h3 id="public" tabindex="-1">public <a class="header-anchor" href="#public" aria-hidden="true">#</a></h3><hr><h3 id="server" tabindex="-1">server <a class="header-anchor" href="#server" aria-hidden="true">#</a></h3><hr><h3 id="shared" tabindex="-1">shared <a class="header-anchor" href="#shared" aria-hidden="true">#</a></h3><hr><h2 id="配置目录" tabindex="-1">配置目录 <a class="header-anchor" href="#配置目录" aria-hidden="true">#</a></h2><h3 id="content" tabindex="-1">content <a class="header-anchor" href="#content" aria-hidden="true">#</a></h3><hr><h3 id="modules" tabindex="-1">modules <a class="header-anchor" href="#modules" aria-hidden="true">#</a></h3><hr><h2 id="根目录文件" tabindex="-1">根目录文件 <a class="header-anchor" href="#根目录文件" aria-hidden="true">#</a></h2><h3 id="env" tabindex="-1">.env <a class="header-anchor" href="#env" aria-hidden="true">#</a></h3><hr><h3 id="gitignore" tabindex="-1">.gitignore <a class="header-anchor" href="#gitignore" aria-hidden="true">#</a></h3><hr><h3 id="nuxtrc" tabindex="-1">.nuxtrc <a class="header-anchor" href="#nuxtrc" aria-hidden="true">#</a></h3><hr><h3 id="nuxtconfigts" tabindex="-1">nuxtconfigts <a class="header-anchor" href="#nuxtconfigts" aria-hidden="true">#</a></h3><hr><h3 id="nodemodules" tabindex="-1">nodemodules <a class="header-anchor" href="#nodemodules" aria-hidden="true">#</a></h3><hr><h3 id="packagejson" tabindex="-1">packagejson <a class="header-anchor" href="#packagejson" aria-hidden="true">#</a></h3><hr><h3 id="tsconfigjson" tabindex="-1">tsconfigjson <a class="header-anchor" href="#tsconfigjson" aria-hidden="true">#</a></h3><hr></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-cfb513e0 data-v-21f75714><!----><div class="prev-next" data-v-21f75714><div class="pager" data-v-21f75714><!----></div><div class="pager" data-v-21f75714><a class="pager-link next" href="/chexDocs/NuxtDocs/CoreEssentials/ProjectConfiguration.html" data-v-21f75714><span class="desc" data-v-21f75714>Next page</span><span class="title" data-v-21f75714>项目配置</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-f44a984a data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>MIT Licensed</p><p class="copyright" data-v-9f24cc86>Copyright © 2023-present Your Team</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"laraveldocs_coreessentials_routing.md\":\"c9fc0631\",\"laraveldocs_overview_apirouting.md\":\"9c130807\",\"laraveldocs_index.md\":\"6f90d39e\",\"nuxtdocs_coreessentials_apirouting.md\":\"ba3e0bbd\",\"nuxtdocs_coreessentials_datafetch.md\":\"d8999fa3\",\"nuxtdocs_coreessentials_directorystructure.md\":\"08656e04\",\"nuxtdocs_coreessentials_projectconfiguration.md\":\"88bf7109\",\"nuxtdocs_coreessentials_routing.md\":\"eaad6ac8\",\"nuxtdocs_coreessentials_statemanagement.md\":\"bbda1df2\",\"nuxtdocs_overview_buildoptimization.md\":\"3f68cf44\",\"nuxtdocs_overview_clitools.md\":\"10c1e4a7\",\"nuxtdocs_overview_cachingstrategies.md\":\"781ccfd2\",\"nuxtdocs_overview_deploymentadaptation.md\":\"23ff6db8\",\"nuxtdocs_overview_errorhandling.md\":\"6595a396\",\"nuxtdocs_overview_internationalization.md\":\"8023a75f\",\"nuxtdocs_overview_pwasupport.md\":\"10891b6e\",\"nuxtdocs_overview_pluginmoduledevelopment.md\":\"dcef11b7\",\"nuxtdocs_overview_renderingmodes.md\":\"6c6a9546\",\"nuxtdocs_overview_seometa.md\":\"8d4ecb32\",\"nuxtdocs_overview_testingstrategies.md\":\"22df8855\",\"nuxtdocs_overview_transitions.md\":\"e0979afb\",\"nuxtdocs_overview_typescriptintegration.md\":\"ccab187c\",\"nuxtdocs_overview_uiframeworkintegration.md\":\"3494dc58\",\"nuxtdocs_overview_initproject.md\":\"7e97cbf2\",\"nuxtdocs_index.md\":\"16a5a1d2\",\"index.md\":\"7f8bdc67\"}")</script>
    <script type="module" async src="/chexDocs/assets/app.01436f97.js"></script>
    
  </body>
</html>